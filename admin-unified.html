<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' ry='12' fill='%23ff6b35'/%3E%3Cpath d='M14 42h8l4-20 6 28 4-16 4 8h10' stroke='%23fff' stroke-width='4' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" />
    <meta name="format-detection" content="telephone=no">
    <title>U.S. Mechanical - Unified Admin Panel</title>
    <link href="./dist/output.css" rel="stylesheet">
    <style>
        :root {
            --accent-blue: #0b21d6;
            --accent-red: #ff6b35;
            --accent-orange: #ff6b35;
            --accent-black: #1a1a1a;
            --muted: #6b7076;
            --card: #ffffff;
            --bg: #f7fafc;
            --text-light: #ffffff;
            --text-dark: #1a1a1a;
            --hero-bg: #1a1a1a;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff6b35 0%, #e05a2a 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        .tab-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 0.5rem 0.5rem 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tab-button.active {
            background: linear-gradient(135deg, #ff6b35 0%, #e05a2a 100%);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .editable {
            position: relative;
            cursor: pointer;
            display: inline-block;
            /* Cross-browser transition */
            -webkit-transition: all 0.3s ease;
            -moz-transition: all 0.3s ease;
            -ms-transition: all 0.3s ease;
            -o-transition: all 0.3s ease;
            transition: all 0.3s ease;
            /* Cross-browser border-radius */
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            padding: 4px 8px;
            display: inline-block;
            min-height: 20px;
            /* Mobile touch support */
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .editable:hover {
            background: rgba(255, 107, 53, 0.2);
            border: 2px dashed #ff6b35;
        }

        .editable::after {
            content: "‚úèÔ∏è";
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff6b35;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            /* Cross-browser flexbox fallback */
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            font-size: 10px;
            opacity: 0;
            /* Cross-browser transition */
            -webkit-transition: opacity 0.3s ease;
            -moz-transition: opacity 0.3s ease;
            -ms-transition: opacity 0.3s ease;
            -o-transition: opacity 0.3s ease;
            transition: opacity 0.3s ease;
        }

        .editable:hover::after {
            opacity: 1;
        }

        /* Override hover styles when actively editing */
        .editable.editing {
            background: transparent !important;
            border: none !important;
            padding: 0 !important;
        }

        .editable.editing:hover {
            background: transparent !important;
            border: none !important;
        }

        .editable.editing::after {
            display: none !important;
        }

        /* Safari-compatible way to hide edit controls when not editing */
        .editable:not(.editing) input,
        .editable:not(.editing) textarea,
        .editable:not(.editing) select,
        .editable:not(.editing) button,
        .editable:not(.editing) .edit-input,
        .editable:not(.editing) .edit-textarea,
        .editable:not(.editing) .save-btn,
        .editable:not(.editing) .cancel-btn,
        .editable:not(.editing) .edit-interface,
        .editable:not(.editing) .edit-controls-panel {
            display: none !important;
        }

        /* Ensure editable elements are properly displayed */
        .editable {
            display: inline-block !important;
            min-height: 20px;
        }

        .edit-input, .edit-textarea {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #ff6b35;
            /* Cross-browser border-radius */
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.9);
            color: #1a1a1a !important;
            font-size: 14px;
            display: block !important;
            visibility: visible !important;
            /* Cross-browser box-sizing */
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            /* Mobile optimization */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            /* Font smoothing for better text rendering */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        #font-size-picker {
            background-color: #1a1a1a !important;
            color: #ffffff !important;
            border: 2px solid #ff6b35;
            border-radius: 4px;
            padding: 8px 12px;
        }

        #font-size-picker option {
            background-color: #1a1a1a !important;
            color: #ffffff !important;
        }

        /* Ensure bold styling works properly */
        .editable[style*="font-weight: bold"] {
            font-weight: bold !important;
        }

        .editable[style*="font-weight: bold"] * {
            font-weight: bold !important;
        }

        /* Style the bold checkbox - Cross-browser compatible */
        #bold-checkbox {
            /* Webkit browsers (Chrome, Safari, Edge) */
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            appearance: none !important;
            width: 16px !important;
            height: 16px !important;
            border: 2px solid #ff6b35 !important;
            border-radius: 3px !important;
            background: white !important;
            background-color: white !important;
            cursor: pointer !important;
            position: relative !important;
            margin: 0 !important;
            padding: 0 !important;
            /* Cross-browser transform */
            -webkit-transform: scale(1.2);
            -moz-transform: scale(1.2);
            -ms-transform: scale(1.2);
            -o-transform: scale(1.2);
            transform: scale(1.2);
            flex-shrink: 0;
        }

        #bold-checkbox:checked {
            background-color: #ff6b35 !important;
            background: #ff6b35 !important;
            border-color: #ff6b35 !important;
        }

        #bold-checkbox:checked::after {
            content: "‚úì" !important;
            position: absolute !important;
            top: -2px !important;
            left: 2px !important;
            color: white !important;
            font-size: 12px !important;
            font-weight: bold !important;
            line-height: 1 !important;
            display: block !important;
        }
        
        #bold-checkbox:hover {
            border-color: #e05a2a !important;
            box-shadow: 0 0 4px rgba(255, 107, 53, 0.5);
        }
        
        #bold-checkbox:checked:hover {
            background-color: #e05a2a !important;
            border-color: #e05a2a !important;
        }

        /* Style the transparent checkbox - same as bold checkbox */
        #bg-transparent-checkbox {
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            appearance: none !important;
            width: 16px !important;
            height: 16px !important;
            border: 2px solid #ff6b35 !important;
            border-radius: 3px !important;
            background: white !important;
            background-color: white !important;
            cursor: pointer !important;
            position: relative !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-transform: scale(1.2);
            -moz-transform: scale(1.2);
            -ms-transform: scale(1.2);
            -o-transform: scale(1.2);
            transform: scale(1.2);
            flex-shrink: 0;
        }

        #bg-transparent-checkbox:checked {
            background-color: #ff6b35 !important;
            background: #ff6b35 !important;
            border-color: #ff6b35 !important;
        }

        #bg-transparent-checkbox:checked::after {
            content: "‚úì" !important;
            position: absolute !important;
            top: -2px !important;
            left: 2px !important;
            color: white !important;
            font-size: 12px !important;
            font-weight: bold !important;
            line-height: 1 !important;
            display: block !important;
        }
        
        #bg-transparent-checkbox:hover {
            border-color: #e05a2a !important;
            box-shadow: 0 0 4px rgba(255, 107, 53, 0.5);
        }
        
        #bg-transparent-checkbox:checked:hover {
            background-color: #e05a2a !important;
            border-color: #e05a2a !important;
        }

        .save-btn, .cancel-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            margin: 2px;
        }

        .save-btn {
            background: #10b981;
            color: white;
        }

        .cancel-btn {
            background: #ef4444;
            color: white;
        }

        /* Debug panel */
        #debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            max-width: 300px;
            z-index: 9999;
            display: none;
        }

        .admin-toolbar {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 6px;
            z-index: 1000;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
            max-width: 200px;
        }

        .admin-toolbar button {
            display: block;
            width: 100%;
            margin: 2px 0;
            padding: 6px 10px;
            background: linear-gradient(135deg, #ff6b35 0%, #e05a2a 100%);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .admin-toolbar button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(255, 107, 53, 0.3);
        }

        .preview-mode .editable::after {
            display: none !important;
        }

        .preview-mode .admin-toolbar {
            display: none !important;
        }

        /* Mobile responsiveness */
        @media screen and (max-width: 768px) {
            .admin-toolbar {
                position: fixed;
                top: 10px;
                right: 10px;
                left: 10px;
                flex-direction: column;
                gap: 5px;
                padding: 8px;
            }
            
            .admin-toolbar button {
                width: 100%;
                padding: 10px;
                font-size: 14px;
                margin: 2px 0;
            }
            
            .editable {
                padding: 8px;
                margin: 4px 0;
                font-size: 16px;
            }
            
            .edit-input, .edit-textarea {
                font-size: 16px; /* Prevents zoom on iOS */
                padding: 12px;
                width: 100%;
            }
            
            .edit-interface {
                padding: 10px;
                margin: 5px 0;
            }
            
            .control-group {
                margin: 8px 0;
            }
            
            .control-group input,
            .control-group select {
                padding: 8px;
                font-size: 16px;
                width: 100%;
            }
            
            .tab-content {
                padding: 10px;
            }
        }

        @media screen and (max-width: 480px) {
            .admin-toolbar {
                top: 5px;
                right: 5px;
                left: 5px;
                padding: 5px;
            }
            
            .editable {
                padding: 6px;
                font-size: 14px;
            }
            
            .edit-interface {
                padding: 8px;
            }
            
            .admin-toolbar button {
                font-size: 12px;
                padding: 8px;
            }
        }

        /* High DPI display support */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .editable::after {
                -webkit-transform: scale(0.5);
                transform: scale(0.5);
            }
        }

        /* Print styles */
        @media print {
            .admin-toolbar,
            .editable::after,
            .edit-interface {
                display: none !important;
            }
            
            .editable {
                border: none !important;
                background: none !important;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .edit-input, .edit-textarea {
                background: rgba(255, 255, 255, 0.95);
                color: #000000 !important;
            }
        }

        /* Color picker styles */
        #color-picker {
            border: 2px solid #ff6b35;
            border-radius: 4px;
            background: none;
            cursor: pointer;
        }

        #color-picker:hover {
            border-color: #e05a2a;
            transform: scale(1.1);
        }

        #color-text {
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        /* Font picker styles */
        #font-picker {
            border: 2px solid #ff6b35 !important;
            border-radius: 4px !important;
            background: #1a1a1a !important;
            color: #ffffff !important;
            cursor: pointer !important;
            font-size: 14px !important;
            padding: 4px 8px !important;
        }

        #font-picker:hover {
            border-color: #e05a2a !important;
            background: #2a2a2a !important;
        }

        #font-picker:focus {
            background: #1a1a1a !important;
            color: #ffffff !important;
        }

        #font-picker option {
            background: #1a1a1a !important;
            color: #ffffff !important;
            padding: 4px 8px !important;
            font-size: 14px !important;
        }

        #font-picker option[style*="font-family"] {
            background: #2a2a2a !important;
            color: #ffffff !important;
            font-family: inherit !important;
        }

        select#font-picker {
            background: #1a1a1a !important;
            color: #ffffff !important;
        }

        select#font-picker option {
            background: #1a1a1a !important;
            color: #ffffff !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="card text-center mb-8">
            <h1 class="text-4xl font-bold mb-4 text-[color:var(--accent-orange)]">U.S. Mechanical Admin Panel</h1>
            <p class="text-xl text-gray-300">Unified Content Management & Live Editing</p>
        </div>

        <!-- Tab Navigation -->
        <div class="card mb-6">
            <div class="flex flex-wrap gap-2 mb-6">
                <button class="tab-button active" onclick="switchTab('live-edit')">üé® Live Edit Mode</button>
                <button class="tab-button" onclick="switchTab('content-management')">üìù Content Management</button>
                <button class="tab-button" onclick="switchTab('image-management')">üñºÔ∏è Image Management</button>
                <button class="tab-button" onclick="switchTab('testimonials')">üí¨ Testimonials</button>
                <button class="tab-button" onclick="switchTab('projects')">üèóÔ∏è Projects</button>
                <button class="tab-button" onclick="switchTab('settings')">‚öôÔ∏è Settings</button>
            </div>
        </div>

        <!-- Live Edit Mode Tab -->
        <div id="live-edit" class="tab-content active">
            <div class="mb-6">
                <h2 class="text-3xl font-bold mb-2 text-[color:var(--accent-orange)]">üé® Live Edit Mode</h2>
                <p class="text-gray-300">Click on any text below to edit it directly. Changes are saved automatically.</p>
            </div>
            
            <!-- Complete Website Structure -->
            <div class="bg-[color:var(--bg)] min-h-screen">
                <!-- NAV -->
                <header class="sticky top-4 z-50">
                    <div class="max-w-7xl mx-auto px-4">
                        <div class="bg-white/90 backdrop-blur-md shadow-xl rounded-2xl p-4 flex items-center gap-6 border border-white/20">
                            <!-- LOGO -->
                            <a href="#home" class="flex items-center gap-3">
                                <img src="images/us-mechanical-logo.png" alt="U.S. Mechanical logo" class="h-20 w-auto rounded-md object-contain"/>
                                <div class="hidden sm:block">
                                    <div class="font-semibold text-2xl text-[color:var(--text-dark)] editable" data-field="company-name">U.S. Mechanical, LLC</div>
                                    <div class="text-sm text-[color:var(--accent-orange)] editable" data-field="company-tagline">Mechanical Contracting ‚Ä¢ Plumbing ‚Ä¢ HVAC ‚Ä¢ Hydronics</div>
                                </div>
                            </a>

                            <!-- NAV LINKS -->
                            <nav class="ml-auto hidden md:flex gap-4 items-center">
                                <a href="#about" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)] editable" data-field="nav-about">About</a>
                                <a href="#services" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)] editable" data-field="nav-services">Services</a>
                                <a href="#portfolio" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)] editable" data-field="nav-portfolio">Projects</a>
                                <a href="#recognition" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)] editable" data-field="nav-recognition">Recognition</a>
                                <a href="#contact" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)] editable" data-field="nav-contact">Contact</a>
                            </nav>

                            <!-- ACTIONS -->
                            <div class="ml-auto md:ml-0 flex items-center gap-3">
                                <a href="#portfolio" class="hidden sm:inline-block px-3 py-2 rounded-lg border border-[color:var(--accent-orange)] text-sm font-semibold text-[color:var(--accent-orange)] hover:bg-[color:var(--accent-orange)]/10 editable" data-field="nav-view-portfolio">View Portfolio</a>
                                <a href="#contact" class="inline-flex items-center px-4 py-2 rounded-lg text-sm font-bold text-white bg-[color:var(--accent-orange)] hover:brightness-95 shadow editable" data-field="nav-request-quote">Request a Quote</a>

                                <!-- mobile menu button -->
                                <button aria-label="Open menu" id="mobileOpen" class="md:hidden ml-2 p-2 rounded-lg hover:bg-[color:var(--accent-orange)]/20 text-[color:var(--text-dark)]">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- mobile menu -->
                    <div id="mobileMenu" class="hidden mt-3 max-w-7xl mx-auto px-4">
                        <div class="bg-white/95 backdrop-blur-sm rounded-xl p-4 shadow">
                            <nav class="flex flex-col gap-2">
                                <a href="#about" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">About</a>
                                <a href="#services" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Services</a>
                                <a href="#portfolio" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Projects</a>
                                <a href="#recognition" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Recognition</a>
                                <a href="#contact" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Contact</a>
                            </nav>
                        </div>
                    </div>
                </header>

                <!-- MAIN -->
                <main id="home" class="pt-0 pb-0">
                    <div class="w-full">

                        <!-- HERO -->
                        <section class="relative py-32 md:py-40 lg:py-48" style="background-color: #0A192F;">
                            <div id="live-edit-hero-background" class="absolute inset-0 opacity-0"></div>
                            <!-- Content container -->
                            <div class="relative z-10 max-w-7xl mx-auto px-6 sm:px-8 lg:px-12">
                                <div class="max-w-4xl">
                                    <!-- Badge -->
                                    <div class="mb-8 inline-block px-4 py-1.5 rounded-full bg-white/10 border border-white/20 backdrop-blur-sm editable" data-field="hero-badge">
                                        <span class="text-xs font-medium text-white/90 uppercase tracking-wider">Excellence Since 1963</span>
                                    </div>
                                    
                                    <!-- Main Title -->
                                    <h1 id="hero-title" class="mb-10 text-6xl md:text-7xl lg:text-8xl font-bold text-white leading-[1.05] tracking-tight editable" data-preserve-html="true" data-field="hero-title">
                                        Mechanical<br>
                                        Contracting<br>
                                        <span class="inline-block px-4 py-2 rounded-lg bg-[color:var(--accent-blue)]/20 text-[color:var(--accent-blue)] mt-3" style="background-color: rgba(11, 33, 214, 0.15); color: #6B9EFF;">Excellence</span>
                                    </h1>
                                    
                                    <!-- Subtitle -->
                                    <p id="hero-subtitle" class="mb-16 text-2xl md:text-3xl text-white/85 leading-relaxed max-w-3xl font-light editable" style="line-height: 1.6;" data-field="hero-subtitle">
                                        Design, Engineering & Installation of Commercial HVAC, Hydronic, and Process Piping Systems
                                    </p>
                                    
                                    <!-- Credentials -->
                                    <div class="mb-16 flex flex-wrap items-center gap-8 text-white/90">
                                        <div class="flex items-center gap-3">
                                            <svg class="w-6 h-6 text-[color:var(--accent-orange)]" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                            </svg>
                                            <span id="hero-credentials" class="text-lg font-medium editable" data-field="hero-credentials">Licensed, Bonded & Insured</span>
                                        </div>
                                        <span class="text-white/20">‚Ä¢</span>
                                        <div class="flex items-center gap-3">
                                            <svg class="w-6 h-6 text-[color:var(--accent-blue)]" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                                            </svg>
                                            <span id="hero-description" class="text-lg font-medium editable" data-field="hero-description">Serving Salt Lake City, Provo, Las Vegas</span>
                                        </div>
                                    </div>

                                    <!-- CTA Buttons -->
                                    <div class="mb-12 flex items-center gap-5 flex-wrap">
                                        <a href="#contact" class="group inline-flex items-center justify-center px-10 py-5 rounded-lg font-semibold text-lg text-white transition-all hover:scale-[1.02] hover:shadow-xl editable" style="background-color: var(--accent-orange);" data-field="hero-cta-primary">
                                            Request a Bid
                                            <svg class="ml-3 w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                        </a>
                                        <a href="#portfolio" class="inline-flex items-center justify-center px-10 py-5 rounded-lg font-semibold text-lg border-2 text-white transition-all hover:bg-white/10 hover:border-white/50 editable" style="border-color: rgba(255, 255, 255, 0.3);" data-field="hero-cta-secondary">
                                            View Portfolio
                                        </a>
                                    </div>

                                    <!-- Safety Commitment -->
                                    <div class="flex items-center gap-3 text-lg text-white/75 editable" data-field="hero-safety">
                                        <svg class="w-6 h-6 text-[color:var(--accent-orange)] flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span>Committed to the highest safety standards on every project</span>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- ABOUT -->
                        <section id="about" class="py-24 md:py-32 lg:py-40 bg-white">
                            <div class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12">
                                <!-- Badge -->
                                <div class="mb-8">
                                    <div class="inline-block bg-[color:var(--accent-blue)]/10 text-[color:var(--accent-blue)] px-5 py-2 rounded-full text-sm font-semibold editable" style="background-color: rgba(11, 33, 214, 0.1);" data-field="about-badge">
                                        About U.S. Mechanical
                                    </div>
                                </div>
                                
                                <!-- Main Heading -->
                                <h2 id="about-title" class="text-5xl md:text-6xl lg:text-7xl font-bold text-[color:var(--text-dark)] mb-12 leading-tight editable" data-field="about-title">Building Excellence Since 1963</h2>

                                <!-- Content Grid: Text Left, Images Right -->
                                <div class="grid md:grid-cols-2 gap-16 md:gap-20 items-start">
                                    <!-- Text Content (Left) -->
                                    <div id="about-content" class="space-y-8">
                                        <p class="text-xl text-[color:var(--text-dark)] leading-relaxed editable" style="line-height: 1.8;" data-field="about-para-1">
                                            Since 1963, U.S. Mechanical, LLC has delivered exceptional mechanical contracting solutions focused on <strong>plumbing</strong>, <strong>hydronic systems</strong>, <strong>HVAC</strong>, and industrial piping. Our comprehensive approach covers every stage‚Äîfrom initial design and engineering (2D/3D/BIM coordination) through full installation‚Äîwith an unwavering commitment to quality, safety, and service.
                                        </p>
                                        
                                        <p class="text-[color:var(--text-dark)] leading-relaxed editable" data-field="about-para-2">
                                            Our integrated approach combines cutting-edge design capabilities with proven installation expertise, ensuring seamless project delivery from concept to completion. We've built our reputation on reliability, technical excellence, and a genuine commitment to our clients' success.
                                        </p>

                                        <!-- Bulleted List with Green Checkmarks -->
                                        <ul class="space-y-4 mt-6">
                                            <li class="flex items-start gap-3">
                                                <div class="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                                    </svg>
                                                </div>
                                                <span class="text-[color:var(--text-dark)] editable" data-field="about-bullet-1">60+ years of experience in large-scale commercial & industrial projects</span>
                                            </li>
                                            <li class="flex items-start gap-3">
                                                <div class="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                                    </svg>
                                                </div>
                                                <span class="text-[color:var(--text-dark)] editable" data-field="about-bullet-2">End-to-end capabilities: design, engineering, installation, and commissioning</span>
                                            </li>
                                            <li class="flex items-start gap-3">
                                                <div class="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                                    </svg>
                                                </div>
                                                <span class="text-[color:var(--text-dark)] editable" data-field="about-bullet-3">Safety-first culture with top-tier risk management on every project</span>
                                            </li>
                                        </ul>
                                    </div>

                                    <!-- Image Grid (Right) -->
                                    <div class="grid grid-cols-2 gap-4">
                                        <!-- Top Left: Welding -->
                                        <div class="rounded-lg overflow-hidden shadow-md aspect-square">
                                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' fill='%23334155'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%2390a4ae' font-family='Arial' font-size='24'%3EWelding%3C/text%3E%3C/svg%3E" alt="Welding work" class="w-full h-full object-cover">
                                        </div>
                                        
                                        <!-- Top Right: Saw Work -->
                                        <div class="rounded-lg overflow-hidden shadow-md aspect-square">
                                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' fill='%23334155'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%2390a4ae' font-family='Arial' font-size='24'%3ESaw Work%3C/text%3E%3C/svg%3E" alt="Construction saw work" class="w-full h-full object-cover">
                                        </div>
                                        
                                        <!-- Bottom Left: Electrical Panel -->
                                        <div class="rounded-lg overflow-hidden shadow-md aspect-square">
                                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' fill='%23334155'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%2390a4ae' font-family='Arial' font-size='24'%3EElectrical%3C/text%3E%3C/svg%3E" alt="Electrical panel work" class="w-full h-full object-cover">
                                        </div>
                                        
                                        <!-- Bottom Right: Circuit Board / Electronics -->
                                        <div class="rounded-lg overflow-hidden shadow-md aspect-square">
                                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' fill='%23334155'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%2390a4ae' font-family='Arial' font-size='24'%3EElectronics%3C/text%3E%3C/svg%3E" alt="Circuit board and electronics" class="w-full h-full object-cover">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- SERVICES -->
                        <section id="services" class="mt-16">
                            <div class="text-center mb-12">
                                <div class="inline-block bg-[color:var(--accent-orange)] text-white px-4 py-2 rounded-full text-sm font-medium mb-4 editable" data-field="services-badge">
                                    Our Services
                                </div>
                                <h3 class="text-4xl font-bold text-[color:var(--text-dark)] mb-4 editable" data-field="services-title">Comprehensive Mechanical Solutions</h3>
                                <p class="text-lg text-[color:var(--text-light)] editable" data-field="services-subtitle">From design and engineering to installation and maintenance, we deliver complete mechanical contracting services</p>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-8">
                                <!-- HVAC Systems -->
                                <div class="bg-white p-8 rounded-2xl shadow-lg hover:translate-y-[-4px] transition border border-[color:var(--accent-blue)]/20">
                                    <div class="w-16 h-16 bg-[color:var(--accent-blue)] rounded-xl flex items-center justify-center mb-6">
                                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-bold text-[color:var(--text-dark)] mb-4 editable" data-field="service-hvac-title">HVAC Systems</h3>
                                    <p class="text-[color:var(--text-light)] mb-6 editable" data-field="service-hvac-desc">Complete heating, ventilation, and air conditioning design, installation, and maintenance for commercial and industrial facilities.</p>
                                    <a href="#" class="text-[color:var(--accent-blue)] font-semibold flex items-center gap-2 editable" data-field="service-hvac-link">
                                        Learn More 
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                        </svg>
                                    </a>
                                </div>

                                <!-- Hydronic Piping -->
                                <div class="bg-white p-8 rounded-2xl shadow-lg hover:translate-y-[-4px] transition border border-[color:var(--accent-orange)]/20">
                                    <div class="w-16 h-16 bg-[color:var(--accent-orange)] rounded-xl flex items-center justify-center mb-6">
                                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-bold text-[color:var(--text-dark)] mb-4 editable" data-field="service-hydronic-title">Hydronic Piping</h3>
                                    <p class="text-[color:var(--text-light)] mb-6 editable" data-field="service-hydronic-desc">Expert installation of hot water, chilled water, and steam distribution systems for heating and cooling applications.</p>
                                    <a href="#" class="text-[color:var(--accent-orange)] font-semibold flex items-center gap-2 editable" data-field="service-hydronic-link">
                                        Learn More 
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                        </svg>
                                    </a>
                                </div>

                                <!-- Process Piping -->
                                <div class="bg-white p-8 rounded-2xl shadow-lg hover:translate-y-[-4px] transition border border-[color:var(--accent-blue)]/20">
                                    <div class="w-16 h-16 bg-[color:var(--accent-blue)] rounded-xl flex items-center justify-center mb-6">
                                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                    </div>
                                    <h3 class="text-xl font-bold text-[color:var(--text-dark)] mb-4 editable" data-field="service-piping-title">Process Piping</h3>
                                    <p class="text-[color:var(--text-light)] mb-6 editable" data-field="service-piping-desc">Industrial process piping systems for manufacturing, pharmaceutical, food processing, and other specialized applications.</p>
                                    <a href="#" class="text-[color:var(--accent-blue)] font-semibold flex items-center gap-2 editable" data-field="service-piping-link">
                                        Learn More 
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </section>

                        <!-- SAFETY -->
                        <section id="safety" class="mt-10">
                            <div class="bg-white p-8 rounded-2xl shadow-lg border border-[color:var(--accent-red)]/20">
                                <h2 class="text-2xl font-bold text-[color:var(--text-dark)] editable" data-field="safety-title">Safety & Risk Management</h2>
                                <div class="mt-6 grid md:grid-cols-2 gap-6 items-start">
                                    <div class="text-[color:var(--text-light)] space-y-4 editable" data-field="safety-content">
                                        <p>U.S. Mechanical strives to conduct the design, installation, and completion of all projects with safety as our top priority. We employ a company-wide safety program, which ensures not only properly trained employees, but the appropriate focus on safety on all our projects. We also employ a full-time safety director, who is OSHA and MSHA accredited. Our safety director oversees safety at both U.S. Mechanical and Snyder Mechanical daily.</p>

                                        <p>We employ some of the most competently skilled employees in the region. These same employees value the safety of their co-workers. The result of this commitment to safety is an experience modification rate (EMR) lower than the national average. This accomplishment has enabled U.S. Mechanical to qualify for self-insured insurance programs that lower the overall risk management costs associated with the general construction industry. These financial savings coupled with our continued commitment to safety provide our client-base added value on every project.</p>

                                        <p>All of us at U.S. Mechanical rank safety with the highest degree of importance, and completing projects with zero safety issues will always be our goal.</p>
                                    </div>

                                    <div class="space-y-4">
                                        <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-red)]/20">
                                            <div class="text-sm font-semibold text-[color:var(--accent-red)] editable" data-field="safety-director-title">Safety Director</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="safety-director">Full-time, OSHA & MSHA accredited ‚Äî daily oversight of safety programs at U.S. Mechanical and Snyder Mechanical.</div>
                                        </div>

                                        <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-blue)]/20">
                                            <div class="text-sm font-semibold text-[color:var(--accent-blue)] editable" data-field="safety-emr-title">EMR & Risk Management</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="safety-emr">Experience Modification Rate (EMR) below the national average; qualified for self-insured programs and reduced risk costs.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- RECOGNITION -->
                        <section id="recognition" class="mt-10">
                            <div class="bg-white p-8 rounded-2xl shadow-lg border border-[color:var(--accent-red)]/20">
                                <h2 class="text-2xl font-bold text-[color:var(--text-dark)] editable" data-field="recognition-title">Recognition</h2>

                                <div class="mt-6 grid md:grid-cols-2 gap-6">
                                    <div class="space-y-4">
                                        <div class="p-4 border border-[color:var(--accent-red)]/20 rounded-lg bg-gray-50">
                                            <div class="text-sm font-semibold text-[color:var(--accent-red)] editable" data-field="recognition-leed-silver-title">LEED Silver Certification</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="recognition-leed-silver">Utah County Convention Center ‚Äî U.S. Mechanical assisted Okland Construction on this project to achieve LEED Silver certification.</div>
                                        </div>

                                        <div class="p-4 border border-[color:var(--accent-blue)]/20 rounded-lg bg-gray-50">
                                            <div class="text-sm font-semibold text-[color:var(--accent-blue)] editable" data-field="recognition-leed-gold-title">LEED Gold Certification</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="recognition-leed-gold">Greenspun Hall ‚Äî Clark Construction recognized U.S. Mechanical for assisting the Greenspun Hall-UNLV project in achieving LEED Gold certification.</div>
                                        </div>

                                        <div class="p-4 border border-[color:var(--accent-blue)]/20 rounded-lg bg-gray-50">
                                            <div class="text-sm font-semibold text-[color:var(--accent-blue)] editable" data-field="recognition-leed-platinum-title">LEED Platinum Certification</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="recognition-leed-platinum">Nevada State Museum ‚Äî Furnished and supplied HVAC systems at Desert Living Center, Origen Museum, and Nevada State Museum (Springs Preserve), assisting in achieving LEED Platinum certification.</div>
                                        </div>
                                    </div>

                                    <div class="space-y-4">
                                        <div class="p-4 border border-[color:var(--accent-blue)]/20 rounded-lg bg-gray-50">
                                            <div class="text-sm font-semibold text-[color:var(--accent-blue)] editable" data-field="recognition-leed-gold-2-title">LEED Gold Certification</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="recognition-leed-gold-2">Red Rock Canyon Visitors Center ‚Äî U.S. Mechanical completed mechanical systems helping the project achieve LEED Gold certification.</div>
                                        </div>

                                        <div class="p-4 border border-[color:var(--accent-blue)]/20 rounded-lg bg-gray-50">
                                            <div class="text-sm font-semibold text-[color:var(--accent-blue)] editable" data-field="recognition-maple-title">Maple Mountain High School ‚Äî Top Project</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="recognition-maple">Recognized by The Intermountain Contractor; U.S. Mechanical furnished and installed the HVAC systems to ensure low operations and maintenance costs.</div>
                                        </div>

                                        <div class="p-4 rounded-lg bg-gray-50 border">
                                            <div class="text-sm font-semibold editable" data-field="recognition-certifications-title">Certifications & Affiliations</div>
                                            <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="recognition-certifications">PHCC of NV ‚Ä¢ NFPA</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- PORTFOLIO (sample grid) -->
                        <section id="portfolio" class="mt-10">
                            <h3 class="text-xl font-bold mb-4 text-[color:var(--text-dark)] editable" data-field="portfolio-title">Selected Projects</h3>
                            <div class="grid md:grid-cols-3 gap-6">
                                <div class="rounded-2xl overflow-hidden shadow">
                                    <img src="data:image/svg+xml;utf8,\
%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='700'%3E%3Crect width='100%25' height='100%25' fill='%23222'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23aaa' font-family='Arial' font-size='48'%3EProject 1%3C/text%3E%3C/svg%3E" alt="Commercial HVAC Retrofit" class="w-full h-56 object-cover"/>
                                    <div class="p-4 bg-white border-t border-[color:var(--accent-red)]/20">
                                        <div class="font-semibold text-[color:var(--text-dark)] editable" data-field="portfolio-project-1-title">Commercial HVAC Retrofit</div>
                                        <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="portfolio-project-1-desc">Full system replacement and controls upgrade in a large commercial facility.</div>
                                    </div>
                                </div>
                                <div class="rounded-2xl overflow-hidden shadow">
                                    <img src="data:image/svg+xml;utf8,\
%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='700'%3E%3Crect width='100%25' height='100%25' fill='%23222'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23aaa' font-family='Arial' font-size='48'%3EProject 2%3C/text%3E%3C/svg%3E" alt="Hydronic Plant Installation" class="w-full h-56 object-cover"/>
                                    <div class="p-4 bg-white border-t border-[color:var(--accent-blue)]/20">
                                        <div class="font-semibold text-[color:var(--text-dark)] editable" data-field="portfolio-project-2-title">Hydronic Plant Installation</div>
                                        <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="portfolio-project-2-desc">New boiler plant and hydronic distribution for multi-building campus.</div>
                                    </div>
                                </div>
                                <div class="rounded-2xl overflow-hidden shadow">
                                    <img src="data:image/svg+xml;utf8,\
%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='700'%3E%3Crect width='100%25' height='100%25' fill='%23222'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23aaa' font-family='Arial' font-size='48'%3EProject 3%3C/text%3E%3C/svg%3E" alt="Process Piping & Fabrication" class="w-full h-56 object-cover"/>
                                    <div class="p-4 bg-white border-t border-[color:var(--accent-blue)]/20">
                                        <div class="font-semibold text-[color:var(--text-dark)] editable" data-field="portfolio-project-3-title">Process Piping & Fabrication</div>
                                        <div class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="portfolio-project-3-desc">Stainless fabrication and high-precision piping for industrial client.</div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- TESTIMONIALS -->
                        <section class="mt-16">
                            <div class="bg-gradient-to-b from-blue-50 to-white p-12 rounded-2xl">
                                <div class="text-center mb-12">
                                    <div class="inline-block bg-[color:var(--accent-orange)] text-white px-4 py-2 rounded-full text-sm font-medium mb-4 editable" data-field="testimonials-badge">
                                        Client Testimonials
                                    </div>
                                    <h3 class="text-4xl font-bold text-[color:var(--text-dark)] mb-4 editable" data-field="testimonials-title">What Our Clients Say</h3>
                                    <p class="text-lg text-[color:var(--text-light)] editable" data-field="testimonials-subtitle">We're proud of the relationships we've built and the results we deliver</p>
                                </div>
                                
                                <div id="testimonials-container" class="grid md:grid-cols-3 gap-8">
                                    <!-- Testimonials will be loaded dynamically from admin panel -->
                                </div>
                            </div>
                        </section>

                        <!-- CTA STRIP -->
                        <section class="mt-10 rounded-2xl p-8 bg-gradient-to-r from-gray-50 to-blue-50 border border-[color:var(--accent-orange)]/20 flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-bold text-[color:var(--text-dark)] editable" data-field="cta-title">Ready to discuss your next mechanical project?</h4>
                                <p class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="cta-subtitle">Tell us about your project and we'll respond promptly with next steps and an estimate.</p>
                            </div>
                            <div class="flex gap-3">
                                <a href="#portfolio" class="px-4 py-3 rounded-lg border border-[color:var(--accent-blue)] text-[color:var(--accent-blue)] font-semibold hover:bg-[color:var(--accent-blue)]/10 editable" data-field="cta-view-projects">View Projects</a>
                                <a href="#contact" class="px-4 py-3 rounded-lg bg-[color:var(--accent-orange)] text-white font-bold shadow editable" data-field="cta-request-quote">Request a Quote</a>
                            </div>
                        </section>

                        <!-- CONTACT -->
                        <section id="contact" class="mt-10 bg-white p-8 rounded-2xl shadow border border-[color:var(--accent-orange)]/20">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="text-xl font-bold text-[color:var(--text-dark)] editable" data-field="contact-title">Contact U.S. Mechanical</h3>
                                    <p class="mt-3 text-[color:var(--text-light)] editable" data-field="contact-offices">Offices: Pleasant Grove, UT ‚Ä¢ Las Vegas, NV ‚Ä¢ Snyder Mechanical in Elko, NV</p>
                                    <p class="mt-4 font-semibold text-[color:var(--text-dark)]"><span id="contact-phone" class="editable" data-field="contact-phone">Phone: (801) 785-6028</span><br><span id="contact-email" class="editable" data-field="contact-email">Email: info@usmechanicalllc.com</span></p>
                                </div>

                                <form id="contactForm" class="space-y-3" onsubmit="handleSubmit(event)">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        <input name="name" required placeholder="Name or Company" class="w-full px-4 py-3 rounded-lg border border-[color:var(--accent-orange)]/20 bg-white text-[color:var(--text-dark)] placeholder-[color:var(--text-light)]/60" />
                                        <input name="email" type="email" required placeholder="Email" class="w-full px-4 py-3 rounded-lg border border-[color:var(--accent-orange)]/20 bg-white text-[color:var(--text-dark)] placeholder-[color:var(--text-light)]/60" />
                                    </div>
                                    <input name="phone" placeholder="Phone" class="w-full px-4 py-3 rounded-lg border border-[color:var(--accent-blue)]/20 bg-white text-[color:var(--text-dark)] placeholder-[color:var(--text-light)]/60" />
                                    <textarea name="message" rows="4" placeholder="Project details / scope" class="w-full px-4 py-3 rounded-lg border border-[color:var(--accent-blue)]/20 bg-white text-[color:var(--text-dark)] placeholder-[color:var(--text-light)]/60"></textarea>
                                    <div class="flex gap-3">
                                        <button type="submit" class="px-5 py-3 rounded-lg bg-[color:var(--accent-orange)] text-white font-bold">Send Request</button>
                                        <a href="mailto:info@usmechanicalllc.com" class="px-5 py-3 rounded-lg border border-[color:var(--accent-blue)] text-[color:var(--accent-blue)] font-semibold hover:bg-[color:var(--accent-blue)]/10">Email</a>
                                    </div>
                                    <div id="formMsg" class="text-sm text-[color:var(--text-light)]"></div>
                                </form>
                            </div>
                        </section>

                        <!-- FOOTER -->
                        <footer class="mt-10">
                            <div class="bg-white p-8 rounded-2xl shadow border border-[color:var(--accent-orange)]/20">
                                <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row gap-6 justify-between">
                                    <div class="flex gap-4 items-start">
                                        <img src="images/us-mechanical-logo.png" alt="U.S. Mechanical logo" class="h-16 w-auto rounded-md object-contain"/>
                                        <div>
                                            <div class="font-semibold text-xl text-[color:var(--text-dark)] editable" data-field="footer-company">U.S. Mechanical, LLC</div>
                                            <div class="text-base text-[color:var(--text-light)] mt-1 editable" data-field="footer-tagline">Founded 1963 ‚Ä¢ Licensed, bonded & insured ‚Ä¢ Serving Intermountain & Southwest regions</div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <div class="font-semibold mb-2 text-[color:var(--text-dark)] editable" data-field="footer-services-title">Services</div>
                                            <ul class="text-sm text-[color:var(--text-light)] space-y-1 editable" data-field="footer-services">
                                                <li>Commercial HVAC</li>
                                                <li>Hydronics & Boilers</li>
                                                <li>Process Piping</li>
                                                <li>Commercial Plumbing</li>
                                            </ul>
                                        </div>

                                        <div>
                                            <div class="font-semibold mb-2 text-[color:var(--text-dark)] editable" data-field="footer-contact-title">Contact</div>
                                            <div class="text-sm text-[color:var(--text-light)] editable" data-field="footer-contact">
                                                Pleasant Grove, UT<br>
                                                Las Vegas, NV<br>
                                                <span class="font-semibold mt-2 inline-block">Phone:</span> (801) 785-6028<br>
                                                <span class="font-semibold">Email:</span> info@usmechanicalllc.com
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-6 text-center text-sm text-[color:var(--text-light)] editable" data-field="footer-copyright">¬© <span id="year"></span> U.S. Mechanical, LLC ‚Äî All rights reserved.</div>
                            </div>
                        </footer>

                    </div>
                </main>
            </div>
            </div>
        </div>

        <!-- Content Management Tab -->
        <div id="content-management" class="tab-content">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-[color:var(--accent-orange)]">üìù Content Management</h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-blue-400">Homepage Content</h3>
                        <button class="btn-primary w-full mb-4" onclick="editHomepageContent()">Edit Homepage</button>
                        <button class="btn-secondary w-full mb-4" onclick="editHeroSection()">Edit Hero Section</button>
                        <button class="btn-secondary w-full mb-4" onclick="editAboutSection()">Edit About Section</button>
                        <button class="btn-secondary w-full mb-4" onclick="editServicesSection()">Edit Services</button>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-blue-400">Page Content</h3>
                        <button class="btn-secondary w-full mb-4" onclick="editAboutPage()">Edit About Page</button>
                        <button class="btn-secondary w-full mb-4" onclick="editHVACPage()">Edit HVAC Page</button>
                        <button class="btn-secondary w-full mb-4" onclick="editHydronicPage()">Edit Hydronic Page</button>
                        <button class="btn-secondary w-full mb-4" onclick="editContactInfo()">Edit Contact Info</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Management Tab -->
        <div id="image-management" class="tab-content">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-[color:var(--accent-orange)]">üñºÔ∏è Image Management</h2>
                
                <!-- Image Usage Guide -->
                <div class="bg-blue-50 p-6 rounded-lg mb-6">
                    <h3 class="text-xl font-bold mb-4 text-blue-800">üì∏ Where Images Can Be Used</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-bold text-blue-700 mb-2">üè† Homepage Sections:</h4>
                            <ul class="text-sm text-blue-600 space-y-1">
                                <li>‚Ä¢ Hero background image</li>
                                <li>‚Ä¢ About section photos</li>
                                <li>‚Ä¢ Services icons/illustrations</li>
                                <li>‚Ä¢ Project portfolio images</li>
                                <li>‚Ä¢ Team photos</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold text-blue-700 mb-2">üìÑ Other Pages:</h4>
                            <ul class="text-sm text-blue-600 space-y-1">
                                <li>‚Ä¢ About page team photos</li>
                                <li>‚Ä¢ HVAC service images</li>
                                <li>‚Ä¢ Hydronic system photos</li>
                                <li>‚Ä¢ Project case studies</li>
                                <li>‚Ä¢ Safety certification images</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Specific Upload Sections -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h4 class="font-bold mb-2 text-orange-400">Hero Section</h4>
                        <input type="file" id="hero-upload" accept="image/*" multiple onchange="handleImageUpload(event, 'hero')" class="w-full mb-2">
                        <p class="text-xs text-gray-400">Background images, banners</p>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h4 class="font-bold mb-2 text-orange-400">About Section</h4>
                        <input type="file" id="about-upload" accept="image/*" multiple onchange="handleImageUpload(event, 'about')" class="w-full mb-2">
                        <p class="text-xs text-gray-400">Team photos, company images</p>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h4 class="font-bold mb-2 text-orange-400">Services</h4>
                        <input type="file" id="services-upload" accept="image/*" multiple onchange="handleImageUpload(event, 'services')" class="w-full mb-2">
                        <p class="text-xs text-gray-400">HVAC, hydronic, piping</p>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h4 class="font-bold mb-2 text-orange-400">Portfolio</h4>
                        <input type="file" id="portfolio-upload" accept="image/*" multiple onchange="handleImageUpload(event, 'portfolio')" class="w-full mb-2">
                        <p class="text-xs text-gray-400">Project showcases</p>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h4 class="font-bold mb-2 text-orange-400">Safety & Certifications</h4>
                        <input type="file" id="safety-upload" accept="image/*" multiple onchange="handleImageUpload(event, 'safety')" class="w-full mb-2">
                        <p class="text-xs text-gray-400">Certificates, safety photos</p>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <h4 class="font-bold mb-2 text-orange-400">General</h4>
                        <input type="file" id="general-upload" accept="image/*" multiple onchange="handleImageUpload(event, 'general')" class="w-full mb-2">
                        <p class="text-xs text-gray-400">Miscellaneous images</p>
                    </div>
                </div>

                <!-- Image Gallery -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-pink-300">Image Gallery</h3>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Filter by Category:</label>
                            <select id="image-filter" class="w-full p-2 border border-gray-300 rounded-lg bg-gray-800 text-white" onchange="filterImages()">
                                <option value="all">All Images</option>
                                <option value="hero">Hero Section</option>
                                <option value="about">About Section</option>
                                <option value="services">Services</option>
                                <option value="portfolio">Portfolio</option>
                                <option value="safety">Safety & Certifications</option>
                                <option value="general">General</option>
                            </select>
                        </div>
                        <div id="image-gallery" class="grid grid-cols-2 gap-4 max-h-64 overflow-y-auto">
                            <!-- Images will be loaded here -->
                        </div>
                        <div class="mt-4">
                            <button class="btn-danger w-full" onclick="clearAllImages()">üóëÔ∏è Clear All Images</button>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-pink-300">Image Statistics</h3>
                        <div id="image-stats" class="bg-gray-800 p-4 rounded-lg">
                            <p class="text-sm text-gray-300">Total Images: <span id="total-images">0</span></p>
                            <p class="text-sm text-gray-300">Total Size: <span id="total-size">0 MB</span></p>
                            <p class="text-sm text-gray-300">Categories: <span id="categories-count">0</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Testimonials Tab -->
        <div id="testimonials" class="tab-content">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-[color:var(--accent-orange)]">üí¨ Testimonials Management</h2>
                
                <div class="mb-6">
                    <button class="btn-primary" onclick="addTestimonial()">‚ûï Add New Testimonial</button>
                </div>
                
                <div id="testimonials-list" class="space-y-4">
                    <!-- Testimonials will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Projects Tab -->
        <div id="projects" class="tab-content">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-[color:var(--accent-orange)]">üèóÔ∏è Projects Management</h2>
                
                <div class="mb-6">
                    <button class="btn-primary" onclick="addProject()">‚ûï Add New Project</button>
                </div>
                
                <div id="projects-list" class="space-y-4">
                    <!-- Projects will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-[color:var(--accent-orange)]">‚öôÔ∏è Settings</h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-blue-400">Data Management</h3>
                        <button class="btn-secondary w-full mb-4" onclick="exportData()">üì§ Export All Data</button>
                        <button class="btn-secondary w-full mb-4" onclick="importData()">üì• Import Data</button>
                        <button class="btn-danger w-full mb-4" onclick="resetToDefault()">üîÑ Reset to Default</button>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-blue-400">Debug Tools</h3>
                        <button class="btn-secondary w-full mb-4" onclick="debugSavedData()">üîç Debug Data</button>
                        <button class="btn-secondary w-full mb-4" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Toolbar -->
    <div class="admin-toolbar">
        <div class="text-sm font-bold mb-2">Admin Controls</div>
        <button onclick="saveAllChanges()">üíæ Save All Changes</button>
        <button onclick="previewMode()">üëÅÔ∏è Preview Mode</button>
        <button onclick="exportContent()">üì§ Export Content</button>
        <button onclick="importContent()">üì• Import Content</button>
        <button onclick="debugSavedData()">üîç Debug Data</button>
        <button onclick="resetToDefault()">üîÑ Reset to Default</button>
    </div>

    <!-- Debug Panel -->
    <div id="debug-panel">
        <div><strong>Debug Info:</strong></div>
        <div id="debug-messages"></div>
    </div>

    <script>
        // Cross-browser compatibility and polyfills
        (function() {
            // Browser detection
            window.browserInfo = {
                isSafari: /^((?!chrome|android).)*safari/i.test(navigator.userAgent),
                isChrome: /chrome/i.test(navigator.userAgent),
                isFirefox: /firefox/i.test(navigator.userAgent),
                isEdge: /edge/i.test(navigator.userAgent),
                isIE: /msie|trident/i.test(navigator.userAgent),
                version: (function() {
                    var ua = navigator.userAgent;
                    var match = ua.match(/(chrome|firefox|safari|edge|msie|trident)\/?\s*(\d+)/i);
                    return match ? match[2] : 'unknown';
                })()
            };
            
            // Polyfill for older browsers
            if (!Element.prototype.matches) {
                Element.prototype.matches = Element.prototype.matchesSelector || 
                    Element.prototype.mozMatchesSelector || 
                    Element.prototype.msMatchesSelector || 
                    Element.prototype.oMatchesSelector || 
                    Element.prototype.webkitMatchesSelector;
            }
            
            if (!Element.prototype.closest) {
                Element.prototype.closest = function(s) {
                    var el = this;
                    do {
                        if (el.matches(s)) return el;
                        el = el.parentElement || el.parentNode;
                    } while (el !== null && el.nodeType === 1);
                    return null;
                };
            }
            
        // Cross-browser event listener
        window.addEvent = function(element, event, handler) {
            if (element.addEventListener) {
                element.addEventListener(event, handler, false);
            } else if (element.attachEvent) {
                element.attachEvent('on' + event, handler);
            } else {
                element['on' + event] = handler;
            }
        };
        
        // Cross-browser remove event listener
        window.removeEvent = function(element, event, handler) {
            if (element.removeEventListener) {
                element.removeEventListener(event, handler, false);
            } else if (element.detachEvent) {
                element.detachEvent('on' + event, handler);
            } else {
                element['on' + event] = null;
            }
        };
        
        // Cross-browser preventDefault and stopPropagation
        window.preventDefault = function(e) {
            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
            }
        };
        
        window.stopPropagation = function(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            } else {
                e.cancelBubble = true;
            }
        };
        
            // Cross-browser getComputedStyle
            window.getComputedStyle = window.getComputedStyle || function(element) {
                return element.currentStyle || {};
            };
            
            // Feature detection
            window.Features = {
                localStorage: (function() {
                    try {
                        return 'localStorage' in window && window.localStorage !== null;
                    } catch (e) {
                        return false;
                    }
                })(),
                flexbox: (function() {
                    var test = document.createElement('div');
                    test.style.display = 'flex';
                    return test.style.display === 'flex' || test.style.display === '-webkit-flex';
                })(),
                grid: (function() {
                    var test = document.createElement('div');
                    test.style.display = 'grid';
                    return test.style.display === 'grid' || test.style.display === '-ms-grid';
                })(),
                transform: (function() {
                    var test = document.createElement('div');
                    return 'transform' in test.style || 'webkitTransform' in test.style || 'mozTransform' in test.style || 'msTransform' in test.style;
                })(),
                transition: (function() {
                    var test = document.createElement('div');
                    return 'transition' in test.style || 'webkitTransition' in test.style || 'mozTransition' in test.style || 'msTransition' in test.style;
                })(),
                addEventListener: !!window.addEventListener,
                querySelector: !!document.querySelector,
                classList: !!document.createElement('div').classList,
                dataset: !!document.createElement('div').dataset
            };
            
            // Cross-browser querySelector
            window.$ = function(selector) {
                if (document.querySelector) {
                    return document.querySelector(selector);
                } else if (document.getElementById) {
                    return document.getElementById(selector.replace('#', ''));
                }
                return null;
            };
            
            // Cross-browser querySelectorAll
            window.$$ = function(selector) {
                if (document.querySelectorAll) {
                    return document.querySelectorAll(selector);
                } else {
                    return [];
                }
            };
        })();

        // Global variables
        let uploadedImages = [];
        let testimonials = [];
        let projects = [];
        let isPreviewMode = false;

        // Cross-browser class manipulation functions
        function hasClass(element, className) {
            if (element.classList) {
                return element.classList.contains(className);
            } else {
                return new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className);
            }
        }
        
        function addClass(element, className) {
            if (element.classList) {
                element.classList.add(className);
            } else {
                if (!hasClass(element, className)) {
                    element.className += ' ' + className;
                }
            }
        }
        
        function removeClass(element, className) {
            if (element.classList) {
                element.classList.remove(className);
            } else {
                element.className = element.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
            }
        }
        
        function toggleClass(element, className) {
            if (hasClass(element, className)) {
                removeClass(element, className);
            } else {
                addClass(element, className);
            }
        }

        // Cross-browser localStorage support
        function getStorageItem(key) {
            try {
                if (typeof(Storage) !== "undefined" && localStorage) {
                    return localStorage.getItem(key);
                }
            } catch (e) {
                console.warn('localStorage not available:', e);
            }
            return null;
        }
        
        function setStorageItem(key, value) {
            try {
                if (typeof(Storage) !== "undefined" && localStorage) {
                    localStorage.setItem(key, value);
                    return true;
                }
            } catch (e) {
                console.warn('localStorage not available:', e);
            }
            return false;
        }
        
        function removeStorageItem(key) {
            try {
                if (typeof(Storage) !== "undefined" && localStorage) {
                    localStorage.removeItem(key);
                    return true;
                }
            } catch (e) {
                console.warn('localStorage not available:', e);
            }
            return false;
        }

        // Debug function to show messages visually
        function showDebug(message) {
            console.log(message);
            const debugPanel = document.getElementById('debug-panel');
            const debugMessages = document.getElementById('debug-messages');
            if (debugPanel && debugMessages) {
                debugPanel.style.display = 'block';
                debugMessages.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
                // Keep only last 10 messages
                const messages = debugMessages.children;
                if (messages.length > 10) {
                    debugMessages.removeChild(messages[0]);
                }
            }
        }

        // Browser compatibility check
        function checkBrowserCompatibility() {
            const issues = [];
            const browser = window.browserInfo || {};
            
            // Ensure window.Features exists before accessing it
            if (!window.Features) {
                window.Features = {
                    localStorage: (function() {
                        try {
                            return 'localStorage' in window && window.localStorage !== null;
                        } catch (e) {
                            return false;
                        }
                    })(),
                    querySelector: !!document.querySelector,
                    addEventListener: !!window.addEventListener
                };
            }
            
            const features = window.Features || {};
            
            // Check for critical features
            if (!features.localStorage) {
                // Fallback check if Features is not defined yet
                try {
                    if (!('localStorage' in window) || !window.localStorage) {
                        issues.push('Local Storage not supported - data will not be saved');
                    }
                } catch (e) {
                    issues.push('Local Storage not supported - data will not be saved');
                }
            }
            
            if (!features.querySelector) {
                // Fallback check if Features is not defined yet
                if (!document.querySelector) {
                    issues.push('QuerySelector not supported - some features may not work');
                }
            }
            
            if (!features.addEventListener) {
                // Fallback check if Features is not defined yet
                if (!window.addEventListener) {
                    issues.push('Event Listeners not supported - interactions may not work');
                }
            }
            
            if (browser.isIE && browser.version < 9) {
                issues.push('Internet Explorer version is too old - please upgrade');
            }
            
            if (browser.isSafari && browser.version < 6) {
                issues.push('Safari version is too old - some features may not work');
            }
            
            // Show compatibility warning if needed
            if (issues.length > 0) {
                const warning = document.createElement('div');
                warning.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    background: #ff6b35;
                    color: white;
                    padding: 10px;
                    text-align: center;
                    z-index: 10000;
                    font-size: 14px;
                `;
                warning.innerHTML = `
                    <strong>Browser Compatibility Warning:</strong> ${issues.join('; ')}
                    <button onclick="this.parentElement.style.display='none'" style="margin-left: 10px; background: white; color: #ff6b35; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Dismiss</button>
                `;
                document.body.insertBefore(warning, document.body.firstChild);
            }
            
            return issues.length === 0;
        }

        // Tab switching
        function switchTab(tabName, event) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // Live editing functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Unified admin panel initialized');
            
            // Check browser compatibility first
            checkBrowserCompatibility();
            
            // Set current year
            const yearElement = document.getElementById('year');
            if (yearElement) {
                yearElement.textContent = new Date().getFullYear();
            }
            
            // Mobile menu toggle
            const mobileOpen = document.getElementById('mobileOpen');
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileOpen && mobileMenu) {
                mobileOpen.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                });
            }
            
            // Contact form handler
            window.handleSubmit = function(e) {
                e.preventDefault();
                const msg = document.getElementById('formMsg');
                msg.textContent = 'Thank you ‚Äî your request has been received. We will contact you shortly.';
                e.target.reset();
                setTimeout(() => msg.textContent = '', 7000);
            };
            
            loadWebsiteContent();
            loadTestimonials();
            loadProjects();
            loadImages();
            
            // Load all section images
            loadAllSectionImages();
            
            // Set up editable elements - Cross-browser compatible
            var editableElements = document.querySelectorAll ? document.querySelectorAll('.editable') : [];
            for (var i = 0; i < editableElements.length; i++) {
                var element = editableElements[i];
                // Ensure element is not already being edited
                if (hasClass(element, 'editing')) {
                    removeClass(element, 'editing');
                }
                
                // Cross-browser event listener
                addEvent(element, 'click', function(e) {
                    // Stop event from bubbling to prevent double-triggering - Cross-browser
                    if (e.stopPropagation) {
                        e.stopPropagation();
                    } else {
                        e.cancelBubble = true;
                    }
                    if (e.preventDefault) {
                        e.preventDefault();
                    } else {
                        e.returnValue = false;
                    }
                    
                    // Don't allow editing if already editing
                    if (hasClass(this, 'editing')) return;
                    
                    // Get original content from localStorage or current text (before any child elements)
                    const field = this.dataset.field;
                    const websiteContent = JSON.parse(getStorageItem('websiteContent') || '{}');
                    let originalContent = websiteContent[field];
                    
                    // If no saved content, extract clean text from the element
                    if (!originalContent) {
                        // Get clean text content by using a clone to extract text
                        const clone = this.cloneNode(true);
                        const inputs = clone.querySelectorAll('input, textarea, select, button');
                        inputs.forEach(input => input.remove());
                        originalContent = clone.textContent.trim();
                    }
                    
                    // Only proceed if we have content to edit
                    if (!originalContent) originalContent = '';
                    
                    // Capture computed styles BEFORE clearing innerHTML to preserve layout
                    const computedStyle = window.getComputedStyle(this);
                    const originalStyles = {
                        fontSize: computedStyle.fontSize,
                        fontFamily: computedStyle.fontFamily,
                        fontWeight: computedStyle.fontWeight,
                        color: computedStyle.color,
                        backgroundColor: computedStyle.backgroundColor,
                        padding: computedStyle.padding,
                        paddingTop: computedStyle.paddingTop,
                        paddingRight: computedStyle.paddingRight,
                        paddingBottom: computedStyle.paddingBottom,
                        paddingLeft: computedStyle.paddingLeft,
                        margin: computedStyle.margin,
                        marginTop: computedStyle.marginTop,
                        marginRight: computedStyle.marginRight,
                        marginBottom: computedStyle.marginBottom,
                        marginLeft: computedStyle.marginLeft,
                        width: computedStyle.width,
                        minWidth: computedStyle.minWidth,
                        maxWidth: computedStyle.maxWidth,
                        lineHeight: computedStyle.lineHeight,
                        letterSpacing: computedStyle.letterSpacing,
                        textAlign: computedStyle.textAlign,
                        display: computedStyle.display,
                        border: computedStyle.border,
                        borderRadius: computedStyle.borderRadius,
                        boxShadow: computedStyle.boxShadow
                    };
                    
                    this.dataset.editing = 'true';
                    this.classList.add('editing');
                    
                    // Create input based on content length
                    let input;
                    if (originalContent.length > 100) {
                        input = document.createElement('textarea');
                        input.className = 'edit-textarea';
                        input.rows = Math.max(3, Math.ceil(originalContent.length / 50));
                    } else {
                        input = document.createElement('input');
                        input.className = 'edit-input';
                        input.type = 'text';
                    }
                    
                    input.value = originalContent;
                    
                    // Apply preserved styles to input to maintain layout
                    input.style.fontSize = originalStyles.fontSize;
                    input.style.fontFamily = originalStyles.fontFamily;
                    input.style.fontWeight = originalStyles.fontWeight;
                    input.style.color = originalStyles.color;
                    input.style.backgroundColor = originalStyles.backgroundColor;
                    input.style.padding = originalStyles.padding;
                    input.style.margin = originalStyles.margin;
                    input.style.width = originalStyles.width;
                    input.style.minWidth = originalStyles.minWidth;
                    input.style.maxWidth = originalStyles.maxWidth;
                    input.style.lineHeight = originalStyles.lineHeight;
                    input.style.letterSpacing = originalStyles.letterSpacing;
                    input.style.textAlign = originalStyles.textAlign;
                    input.style.border = originalStyles.border;
                    input.style.borderRadius = originalStyles.borderRadius;
                    input.style.boxShadow = originalStyles.boxShadow;
                    // Make input fill container
                    input.style.boxSizing = 'border-box';
                    
                    this.innerHTML = '';
                    this.appendChild(input);
                    
                    // Store reference to the input and edit container for real-time updates
                    this._editInput = input;
                    
                    // Create a preview function for this specific element
                    const updatePreview = () => {
                        showDebug('updatePreview called');
                        const input = this._editInput;
                        if (!input) {
                            showDebug('No input found');
                            return;
                        }
                        
                        // Query from editControlsContainer (stored on element) instead of 'this'
                        const editPanel = this._editControlsContainer;
                        if (!editPanel) {
                            showDebug('Edit panel not found');
                            return;
                        }
                        
                        const colorPicker = editPanel.querySelector('#color-picker');
                        const fontPicker = editPanel.querySelector('#font-picker');
                        const fontSizePicker = editPanel.querySelector('#font-size-picker');
                        const boldCheckbox = editPanel.querySelector('#bold-checkbox');
                        const bgColorPicker = editPanel.querySelector('#background-color-picker');
                        const bgTransparentCheckbox = editPanel.querySelector('#bg-transparent-checkbox');
                        
                        showDebug('Controls found - Color: ' + !!colorPicker + ' Font: ' + !!fontPicker + ' Size: ' + !!fontSizePicker + ' Bold: ' + !!boldCheckbox + ' Bg: ' + !!bgColorPicker + ' Transparent: ' + !!bgTransparentCheckbox);
                        
                        // Apply styles to the input for real-time preview
                        if (colorPicker) {
                            const colorValue = colorPicker.value;
                            input.style.setProperty('color', colorValue, 'important');
                            showDebug('Applied color: ' + colorValue + ' to input');
                        }
                        if (bgColorPicker) {
                            let bgValue;
                            if (bgTransparentCheckbox && bgTransparentCheckbox.checked) {
                                bgValue = 'transparent';
                                showDebug('Transparent checkbox is checked');
                            } else {
                                bgValue = bgColorPicker.value;
                                // Ensure it's a valid hex color
                                if (!bgValue || !bgValue.match(/^#[0-9A-F]{6}$/i)) {
                                    bgValue = bgColorPicker.value || '#ffffff';
                                }
                                showDebug('Using color picker value: ' + bgValue);
                            }
                            if (bgValue === 'transparent') {
                                input.style.setProperty('background-color', 'transparent', 'important');
                                showDebug('Applied background color: transparent to input');
                            } else {
                                input.style.setProperty('background-color', bgValue, 'important');
                                showDebug('Applied background color: ' + bgValue + ' to input');
                            }
                        } else {
                            showDebug('Background color picker not found');
                        }
                        if (fontPicker) {
                            input.style.setProperty('font-family', fontPicker.value, 'important');
                            showDebug('Applied font: ' + fontPicker.value);
                        }
                        if (fontSizePicker) {
                            input.style.setProperty('font-size', fontSizePicker.value, 'important');
                            showDebug('Applied font size: ' + fontSizePicker.value);
                        }
                        if (boldCheckbox) {
                            const isBold = boldCheckbox.checked;
                            input.style.setProperty('font-weight', isBold ? 'bold' : 'normal', 'important');
                            showDebug('Applied bold: ' + isBold + ' to input');
                        }
                    };
                    
                    // Store the updatePreview function
                    this._updatePreview = updatePreview;
                    
                    // Get current color or default - convert RGB to hex if needed
                    let currentColor = this.style.color || '';
                    if (!currentColor || !currentColor.startsWith('#')) {
                        // Try to get computed color
                        const computedColor = window.getComputedStyle(this).color;
                        if (computedColor && computedColor.startsWith('rgb')) {
                            // Convert RGB to hex
                            const rgb = computedColor.match(/\d+/g);
                            if (rgb && rgb.length >= 3) {
                                const r = parseInt(rgb[0]).toString(16).padStart(2, '0');
                                const g = parseInt(rgb[1]).toString(16).padStart(2, '0');
                                const b = parseInt(rgb[2]).toString(16).padStart(2, '0');
                                currentColor = '#' + r + g + b;
                            } else {
                                currentColor = '#1a1a1a';
                            }
                        } else if (computedColor && computedColor.startsWith('#')) {
                            currentColor = computedColor;
                        } else {
                            currentColor = '#1a1a1a';
                        }
                    }
                    
                    // Get current background color or default - convert RGB to hex if needed
                    let currentBackgroundColor = this.style.backgroundColor || '';
                    
                    // Check localStorage first
                    const savedBgColor = websiteContent[field + '_backgroundColor'];
                    if (savedBgColor) {
                        currentBackgroundColor = savedBgColor;
                    }
                    
                    if (!currentBackgroundColor || (!currentBackgroundColor.startsWith('#') && currentBackgroundColor !== 'transparent')) {
                        // Try to get computed background color
                        const computedBgColor = window.getComputedStyle(this).backgroundColor;
                        if (computedBgColor && computedBgColor.startsWith('rgb')) {
                            // Convert RGB to hex
                            const rgb = computedBgColor.match(/\d+/g);
                            if (rgb && rgb.length >= 3) {
                                const r = parseInt(rgb[0]).toString(16).padStart(2, '0');
                                const g = parseInt(rgb[1]).toString(16).padStart(2, '0');
                                const b = parseInt(rgb[2]).toString(16).padStart(2, '0');
                                currentBackgroundColor = '#' + r + g + b;
                            } else {
                                currentBackgroundColor = 'transparent';
                            }
                        } else if (computedBgColor && computedBgColor.startsWith('#')) {
                            currentBackgroundColor = computedBgColor;
                        } else if (computedBgColor === 'rgba(0, 0, 0, 0)' || computedBgColor === 'transparent' || !computedBgColor || computedBgColor === 'none') {
                            currentBackgroundColor = 'transparent';
                        } else {
                            currentBackgroundColor = 'transparent';
                        }
                    }
                    
                    // Ensure if not transparent, it's a valid hex color
                    if (currentBackgroundColor !== 'transparent' && !currentBackgroundColor.match(/^#[0-9A-F]{6}$/i)) {
                        // Try to convert any other format to hex
                        if (currentBackgroundColor.startsWith('rgb')) {
                            const rgb = currentBackgroundColor.match(/\d+/g);
                            if (rgb && rgb.length >= 3) {
                                const r = parseInt(rgb[0]).toString(16).padStart(2, '0');
                                const g = parseInt(rgb[1]).toString(16).padStart(2, '0');
                                const b = parseInt(rgb[2]).toString(16).padStart(2, '0');
                                currentBackgroundColor = '#' + r + g + b;
                            } else {
                                currentBackgroundColor = '#ffffff';
                            }
                        } else {
                            currentBackgroundColor = '#ffffff';
                        }
                    }
                    
                    // Get current font or default
                    const currentFont = this.style.fontFamily || 'Inter, system-ui, sans-serif';
                    
                    // Get current font size or default
                    const currentFontSize = this.style.fontSize || '16px';
                    
                    // Get current bold state
                    const computedStyleBold = window.getComputedStyle(this);
                    const currentBold = computedStyleBold.fontWeight === 'bold' || 
                                       computedStyleBold.fontWeight === '700' || 
                                       parseInt(computedStyleBold.fontWeight) >= 700 ||
                                       this.style.fontWeight === 'bold' || 
                                       this.style.fontWeight === '700';
                    
                    // Debug: log the bold detection
                    showDebug('Bold detection - computed: ' + computedStyleBold.fontWeight + ' style: ' + this.style.fontWeight + ' result: ' + currentBold);
                    
                    
                    // Create compact edit controls container
                    const editControlsContainer = document.createElement('div');
                    editControlsContainer.className = 'edit-controls-panel';
                    // Store reference for updatePreview to use
                    this._editControlsContainer = editControlsContainer;
                    
                    // Calculate position to avoid going off-screen
                    const rect = this.getBoundingClientRect();
                    const panelWidth = 300;
                    const panelHeight = 220;
                    let leftPos = '0';
                    let topPos = '100%';
                    
                    // If panel would go off right edge, position it to the left instead
                    if (rect.right + panelWidth > window.innerWidth) {
                        leftPos = 'auto';
                        editControlsContainer.style.right = '0';
                    }
                    
                    // If panel would go off bottom edge, position it above instead
                    if (rect.bottom + panelHeight > window.innerHeight) {
                        topPos = 'auto';
                        editControlsContainer.style.bottom = '100%';
                    }
                    
                    editControlsContainer.style.cssText = 'position: absolute; top: ' + topPos + '; left: ' + leftPos + '; background: rgba(0, 0, 0, 0.95); padding: 8px; border-radius: 6px; margin-top: 4px; z-index: 10000; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); min-width: 280px; max-width: 320px; display: grid; grid-template-columns: auto 1fr; gap: 6px; align-items: center;';
                    
                    // Add color picker
                    const colorLabel = document.createElement('label');
                    colorLabel.textContent = 'Color:';
                    colorLabel.style.cssText = 'font-size: 11px; color: white; white-space: nowrap;';
                    editControlsContainer.appendChild(colorLabel);
                    const colorContainer = document.createElement('div');
                    colorContainer.style.cssText = 'display: flex; gap: 4px; align-items: center;';
                    colorContainer.innerHTML = 
                        '<input type="color" id="color-picker" style="width: 32px; height: 32px; border: 1px solid #ff6b35; border-radius: 4px; cursor: pointer; background: none;" value="' + currentColor + '">' +
                        '<input type="text" id="color-text" style="width: 70px; padding: 4px 6px; font-size: 11px; border: 1px solid #ff6b35; border-radius: 4px; background: rgba(255,255,255,0.9); color: #1a1a1a;" placeholder="#1a1a1a" value="' + currentColor + '">';
                    editControlsContainer.appendChild(colorContainer);
                    
                    // Add font picker
                    const fontLabel = document.createElement('label');
                    fontLabel.textContent = 'Font:';
                    fontLabel.style.cssText = 'font-size: 11px; color: white; white-space: nowrap;';
                    editControlsContainer.appendChild(fontLabel);
                    const fontContainer = document.createElement('div');
                    fontContainer.innerHTML = 
                        '<select id="font-picker" style="width: 100%; padding: 4px 6px; font-size: 11px; border: 1px solid #ff6b35; border-radius: 4px; background-color: #1a1a1a; color: #ffffff;">' +
                            '<option value="Inter, system-ui, sans-serif" style="font-family: Inter, system-ui, sans-serif; background: #1a1a1a; color: #ffffff;">Inter (Default)</option>' +
                            '<option value="Arial, sans-serif" style="font-family: Arial, sans-serif; background: #1a1a1a; color: #ffffff;">Arial</option>' +
                            '<option value="Helvetica, sans-serif" style="font-family: Helvetica, sans-serif; background: #1a1a1a; color: #ffffff;">Helvetica</option>' +
                            '<option value="Georgia, serif" style="font-family: Georgia, serif; background: #1a1a1a; color: #ffffff;">Georgia</option>' +
                            '<option value="Times New Roman, serif" style="font-family: Times New Roman, serif; background: #1a1a1a; color: #ffffff;">Times New Roman</option>' +
                            '<option value="Courier New, monospace" style="font-family: Courier New, monospace; background: #1a1a1a; color: #ffffff;">Courier New</option>' +
                            '<option value="Verdana, sans-serif" style="font-family: Verdana, sans-serif; background: #1a1a1a; color: #ffffff;">Verdana</option>' +
                            '<option value="Trebuchet MS, sans-serif" style="font-family: Trebuchet MS, sans-serif; background: #1a1a1a; color: #ffffff;">Trebuchet MS</option>' +
                            '<option value="Impact, sans-serif" style="font-family: Impact, sans-serif; background: #1a1a1a; color: #ffffff;">Impact</option>' +
                            '<option value="Comic Sans MS, cursive" style="font-family: Comic Sans MS, cursive; background: #1a1a1a; color: #ffffff;">Comic Sans MS</option>' +
                            '<option value="Brush Script MT, cursive" style="font-family: Brush Script MT, cursive; background: #1a1a1a; color: #ffffff;">Brush Script MT</option>' +
                        '</select>';
                    editControlsContainer.appendChild(fontContainer);
                    
                    // Add font size picker
                    const sizeLabel = document.createElement('label');
                    sizeLabel.textContent = 'Size:';
                    sizeLabel.style.cssText = 'font-size: 11px; color: white; white-space: nowrap;';
                    editControlsContainer.appendChild(sizeLabel);
                    const fontSizeContainer = document.createElement('div');
                    fontSizeContainer.innerHTML = 
                        '<select id="font-size-picker" style="width: 100%; padding: 4px 6px; font-size: 11px; border: 1px solid #ff6b35; border-radius: 4px; background-color: #1a1a1a; color: #ffffff;">' +
                            '<option value="12px" style="background: #1a1a1a; color: #ffffff;">12px</option>' +
                            '<option value="14px" style="background: #1a1a1a; color: #ffffff;">14px</option>' +
                            '<option value="16px" style="background: #1a1a1a; color: #ffffff;">16px</option>' +
                            '<option value="18px" style="background: #1a1a1a; color: #ffffff;">18px</option>' +
                            '<option value="20px" style="background: #1a1a1a; color: #ffffff;">20px</option>' +
                            '<option value="24px" style="background: #1a1a1a; color: #ffffff;">24px</option>' +
                            '<option value="28px" style="background: #1a1a1a; color: #ffffff;">28px</option>' +
                            '<option value="32px" style="background: #1a1a1a; color: #ffffff;">32px</option>' +
                            '<option value="36px" style="background: #1a1a1a; color: #ffffff;">36px</option>' +
                            '<option value="48px" style="background: #1a1a1a; color: #ffffff;">48px</option>' +
                        '</select>';
                    editControlsContainer.appendChild(fontSizeContainer);
                    
                    // Add background color picker
                    const bgColorLabel = document.createElement('label');
                    bgColorLabel.textContent = 'Bg Color:';
                    bgColorLabel.style.cssText = 'font-size: 11px; color: white; white-space: nowrap;';
                    editControlsContainer.appendChild(bgColorLabel);
                    const bgColorContainer = document.createElement('div');
                    bgColorContainer.style.cssText = 'display: flex; gap: 4px; align-items: center; flex-wrap: wrap;';
                    // Ensure we have a valid hex color for the color picker (it requires hex format)
                    let bgColorValue = '#ffffff'; // Default
                    if (currentBackgroundColor !== 'transparent' && currentBackgroundColor.match(/^#[0-9A-F]{6}$/i)) {
                        bgColorValue = currentBackgroundColor;
                    } else if (currentBackgroundColor !== 'transparent') {
                        // If it's not transparent but not valid hex, use default
                        bgColorValue = '#ffffff';
                    }
                    console.log('Background color picker initialization:', { currentBackgroundColor, bgColorValue });
                    bgColorContainer.innerHTML = 
                        '<input type="color" id="background-color-picker" style="width: 32px; height: 32px; border: 1px solid #ff6b35; border-radius: 4px; cursor: pointer; background-color: ' + bgColorValue + '; padding: 0;" value="' + bgColorValue + '">' +
                        '<input type="text" id="background-color-text" style="width: 70px; padding: 4px 6px; font-size: 11px; border: 1px solid #ff6b35; border-radius: 4px; background: rgba(255,255,255,0.9); color: #1a1a1a;" placeholder="transparent" value="' + (currentBackgroundColor || 'transparent') + '">' +
                        '<label style="font-size: 10px; color: #ccc; cursor: pointer; display: flex; align-items: center; gap: 4px;"><input type="checkbox" id="bg-transparent-checkbox" ' + (currentBackgroundColor === 'transparent' ? 'checked' : '') + '> Transparent</label>';
                    editControlsContainer.appendChild(bgColorContainer);
                    
                    // Add bold toggle
                    const boldLabel = document.createElement('label');
                    boldLabel.textContent = 'Bold:';
                    boldLabel.style.cssText = 'font-size: 11px; color: white; white-space: nowrap;';
                    editControlsContainer.appendChild(boldLabel);
                    const boldContainer = document.createElement('div');
                    boldContainer.style.cssText = 'display: flex; align-items: center;';
                    
                    // Create checkbox with proper ID and class - don't use inline styles that override CSS
                    const boldCheckbox = document.createElement('input');
                    boldCheckbox.type = 'checkbox';
                    boldCheckbox.id = 'bold-checkbox';
                    boldCheckbox.className = 'bold-checkbox-input';
                    // Only set cursor, let CSS handle the rest
                    boldCheckbox.style.cursor = 'pointer';
                    boldCheckbox.checked = currentBold;
                    
                    boldContainer.appendChild(boldCheckbox);
                    editControlsContainer.appendChild(boldContainer);
                    
                    // Add buttons row
                    const buttonLabel = document.createElement('label');
                    buttonLabel.style.cssText = 'grid-column: 1 / -1; font-size: 11px; color: white; margin-top: 4px;';
                    editControlsContainer.appendChild(buttonLabel);
                    const buttonContainer = document.createElement('div');
                    buttonContainer.style.cssText = 'grid-column: 1 / -1; display: flex; gap: 4px; margin-top: 4px;';
                    editControlsContainer.appendChild(buttonContainer);
                    
                    this.appendChild(editControlsContainer);
                    
                    // Set the checkbox state and add event listener
                    if (boldCheckbox) {
                        boldCheckbox.checked = currentBold;
                        showDebug('Setting bold checkbox to: ' + currentBold);
                        
                        // Force initial preview update to show bold state
                        if (currentBold) {
                            input.style.fontWeight = 'bold';
                        }
                        
                        // Add change event listener
                        boldCheckbox.addEventListener('change', function(e) {
                            e.stopPropagation();
                            showDebug('Bold checkbox changed! Checked: ' + this.checked);
                            updatePreview();
                        });
                        
                        // Also add click listener for visual feedback
                        boldCheckbox.addEventListener('click', function(e) {
                            e.stopPropagation();
                            showDebug('Bold checkbox clicked! Checked: ' + this.checked);
                        });
                    }
                    
                    // Add save/cancel buttons (already created buttonContainer above)
                    const saveBtn = document.createElement('button');
                    saveBtn.className = 'save-btn';
                    saveBtn.textContent = 'Save';
                    saveBtn.style.cssText = 'padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: bold; background: #10b981; color: white; flex: 1;';
                    saveBtn.onclick = function(e) {
                        e.stopPropagation();
                        e.preventDefault();
                        saveEdit(this);
                        return false;
                    };
                    const cancelBtn = document.createElement('button');
                    cancelBtn.className = 'cancel-btn';
                    cancelBtn.textContent = 'Cancel';
                    cancelBtn.style.cssText = 'padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: bold; background: #ef4444; color: white; flex: 1;';
                    cancelBtn.onclick = function(e) {
                        e.stopPropagation();
                        e.preventDefault();
                        cancelEdit(this);
                        return false;
                    };
                    buttonContainer.appendChild(saveBtn);
                    buttonContainer.appendChild(cancelBtn);
                    
                    // Sync color picker and text input - get references AFTER appending
                    setTimeout(() => {
                        const colorPicker = editControlsContainer.querySelector('#color-picker');
                        const colorText = editControlsContainer.querySelector('#color-text');
                        
                        if (!colorPicker) {
                            console.error('Color picker not found!');
                            showDebug('ERROR: Color picker element not found');
                            return;
                        }
                        
                        if (!colorText) {
                            console.error('Color text input not found!');
                            showDebug('ERROR: Color text input not found');
                            return;
                        }
                        
                        console.log('Setting up color picker listeners. Initial value:', colorPicker.value);
                        showDebug('Color picker found with value: ' + colorPicker.value);
                        
                        // Ensure color is in hex format
                        if (currentColor && !currentColor.startsWith('#')) {
                            // Try to convert
                            const tempDiv = document.createElement('div');
                            tempDiv.style.color = currentColor;
                            const computed = window.getComputedStyle(tempDiv).color;
                            if (computed && computed.startsWith('rgb')) {
                                const rgb = computed.match(/\d+/g);
                                if (rgb && rgb.length >= 3) {
                                    const r = parseInt(rgb[0]).toString(16).padStart(2, '0');
                                    const g = parseInt(rgb[1]).toString(16).padStart(2, '0');
                                    const b = parseInt(rgb[2]).toString(16).padStart(2, '0');
                                    colorPicker.value = '#' + r + g + b;
                                    colorText.value = '#' + r + g + b;
                                }
                            }
                        }
                        
                        // Add change event listener with proper error handling
                        colorPicker.addEventListener('change', function(e) {
                            e.stopPropagation();
                            const newColor = this.value;
                            console.log('Color picker changed to: ' + newColor);
                            showDebug('Color picker changed to: ' + newColor);
                            colorText.value = newColor;
                            updatePreview();
                        });
                        
                        // Add input event for real-time updates (some browsers)
                        colorPicker.addEventListener('input', function(e) {
                            e.stopPropagation();
                            const newColor = this.value;
                            console.log('Color picker input: ' + newColor);
                            colorText.value = newColor;
                            updatePreview();
                        });
                        
                        colorText.addEventListener('input', function(e) {
                            e.stopPropagation();
                            const newColor = this.value;
                            showDebug('Color text input: ' + newColor);
                            if (newColor.match(/^#[0-9A-F]{6}$/i)) {
                                colorPicker.value = newColor;
                                updatePreview();
                            }
                        });
                        
                        // Also add click handler to ensure it works
                        colorPicker.addEventListener('click', function(e) {
                            e.stopPropagation();
                            console.log('Color picker clicked');
                        });
                    }, 10);
                    
                    // Set current font in dropdown
                    const fontSelect = fontContainer.querySelector('#font-picker');
                    fontSelect.value = currentFont;
                    
                    // Force dark styling with JavaScript
                    fontSelect.style.backgroundColor = '#1a1a1a';
                    fontSelect.style.color = '#ffffff';
                    
                    // Apply dark styling to all options
                    const options = fontSelect.querySelectorAll('option');
                    options.forEach(option => {
                        option.style.backgroundColor = '#1a1a1a';
                        option.style.color = '#ffffff';
                    });
                    
                    // Add change listener for real-time preview
                    fontSelect.addEventListener('change', function() {
                        showDebug('Font changed to: ' + this.value);
                        updatePreview();
                    });
                    
                    // Set current font size in dropdown
                    const fontSizeSelect = fontSizeContainer.querySelector('#font-size-picker');
                    fontSizeSelect.value = currentFontSize;
                    
                    // Force dark styling for font size picker
                    fontSizeSelect.style.backgroundColor = '#1a1a1a';
                    fontSizeSelect.style.color = '#ffffff';
                    
                    // Apply dark styling to all font size options
                    const fontSizeOptions = fontSizeSelect.querySelectorAll('option');
                    fontSizeOptions.forEach(option => {
                        option.style.backgroundColor = '#1a1a1a';
                        option.style.color = '#ffffff';
                    });
                    
                    // Add change listener for real-time preview
                    fontSizeSelect.addEventListener('change', function() {
                        showDebug('Font size changed to: ' + this.value);
                        updatePreview();
                    });
                    
                    // Set up background color picker event listeners
                    setTimeout(() => {
                        const bgColorPicker = editControlsContainer.querySelector('#background-color-picker');
                        const bgColorText = editControlsContainer.querySelector('#background-color-text');
                        const bgTransparentCheckbox = editControlsContainer.querySelector('#bg-transparent-checkbox');
                        
                        if (bgColorPicker && bgColorText && bgTransparentCheckbox) {
                            console.log('Setting up background color picker event listeners');
                            
                            // Background color picker change
                            bgColorPicker.addEventListener('change', function(e) {
                                e.stopPropagation();
                                const newColor = this.value;
                                console.log('Background color picker changed to: ' + newColor);
                                bgColorText.value = newColor;
                                bgTransparentCheckbox.checked = false;
                                updatePreview();
                            });
                            
                            bgColorPicker.addEventListener('input', function(e) {
                                e.stopPropagation();
                                const newColor = this.value;
                                console.log('Background color picker input: ' + newColor);
                                bgColorText.value = newColor;
                                bgTransparentCheckbox.checked = false;
                                updatePreview();
                            });
                            
                            // Add click handler to ensure it works
                            bgColorPicker.addEventListener('click', function(e) {
                                e.stopPropagation();
                                console.log('Background color picker clicked');
                            });
                            
                            // Background color text input
                            bgColorText.addEventListener('input', function(e) {
                                e.stopPropagation();
                                const newColor = this.value;
                                console.log('Background color text input: ' + newColor);
                                if (newColor.match(/^#[0-9A-F]{6}$/i)) {
                                    bgColorPicker.value = newColor;
                                    bgTransparentCheckbox.checked = false;
                                    updatePreview();
                                } else if (newColor === 'transparent') {
                                    bgTransparentCheckbox.checked = true;
                                    updatePreview();
                                }
                            });
                            
                            // Transparent checkbox - add multiple event listeners to ensure it works
                            bgTransparentCheckbox.addEventListener('change', function(e) {
                                e.stopPropagation();
                                // Don't prevent default - let checkbox update
                                const isChecked = this.checked;
                                console.log('Transparent checkbox changed, checked: ' + isChecked);
                                if (isChecked) {
                                    bgColorText.value = 'transparent';
                                    // Keep color picker value but mark as transparent
                                } else {
                                    // Unchecking transparent - use color picker value
                                    if (bgColorPicker.value) {
                                        bgColorText.value = bgColorPicker.value;
                                    } else {
                                        bgColorPicker.value = '#ffffff';
                                        bgColorText.value = '#ffffff';
                                    }
                                }
                                updatePreview();
                            });
                            
                            bgTransparentCheckbox.addEventListener('click', function(e) {
                                e.stopPropagation();
                                // Don't prevent default - let the checkbox update
                                console.log('Transparent checkbox clicked, current checked state: ' + this.checked);
                                // Use setTimeout to let the checkbox state update first
                                setTimeout(() => {
                                    const isChecked = bgTransparentCheckbox.checked;
                                    console.log('Transparent checkbox state after click: ' + isChecked);
                                    if (isChecked) {
                                        bgColorText.value = 'transparent';
                                    } else {
                                        if (bgColorPicker.value) {
                                            bgColorText.value = bgColorPicker.value;
                                        } else {
                                            bgColorPicker.value = '#ffffff';
                                            bgColorText.value = '#ffffff';
                                        }
                                    }
                                    updatePreview();
                                }, 10);
                            });
                            
                            // Also handle label click
                            const transparentLabel = bgTransparentCheckbox.closest('label');
                            if (transparentLabel) {
                                transparentLabel.addEventListener('click', function(e) {
                                    // Let the checkbox handle it, but ensure updatePreview is called
                                    setTimeout(() => {
                                        const checkbox = this.querySelector('#bg-transparent-checkbox');
                                        if (checkbox) {
                                            if (checkbox.checked) {
                                                bgColorText.value = 'transparent';
                                            } else {
                                                if (bgColorPicker.value) {
                                                    bgColorText.value = bgColorPicker.value;
                                                } else {
                                                    bgColorPicker.value = '#ffffff';
                                                    bgColorText.value = '#ffffff';
                                                }
                                            }
                                            updatePreview();
                                        }
                                    }, 10);
                                });
                            }
                        } else {
                            console.error('Background color picker elements not found!', {
                                bgColorPicker: !!bgColorPicker,
                                bgColorText: !!bgColorText,
                                bgTransparentCheckbox: !!bgTransparentCheckbox
                            });
                        }
                    }, 20);
                    
                    
                    // Call updatePreview initially to set the current styles
                    updatePreview();
                    
                    input.focus();
                    input.select();
                });
            }
        });

        function saveEdit(button) {
            if (event) event.stopPropagation();
            const container = button.closest('.editable');
            if (!container) return;
            
            const input = container.querySelector('input[type="text"], textarea');
            if (!input) return;
            
            // Find the edit controls panel (it's in a separate container, not inside the editable element)
            const editPanelSave = container.querySelector('.edit-controls-panel') || document.querySelector('.edit-controls-panel');
            
            const colorPicker = editPanelSave ? editPanelSave.querySelector('#color-picker') : container.querySelector('#color-picker');
            const colorText = editPanelSave ? editPanelSave.querySelector('#color-text') : container.querySelector('#color-text');
            const fontPicker = editPanelSave ? editPanelSave.querySelector('#font-picker') : container.querySelector('#font-picker');
            const fontSizePicker = editPanelSave ? editPanelSave.querySelector('#font-size-picker') : container.querySelector('#font-size-picker');
            const boldCheckbox = editPanelSave ? editPanelSave.querySelector('#bold-checkbox') : container.querySelector('#bold-checkbox');
            const bgColorPicker = editPanelSave ? editPanelSave.querySelector('#background-color-picker') : container.querySelector('#background-color-picker');
            const bgColorText = editPanelSave ? editPanelSave.querySelector('#background-color-text') : container.querySelector('#background-color-text');
            const bgTransparentCheckbox = editPanelSave ? editPanelSave.querySelector('#bg-transparent-checkbox') : container.querySelector('#bg-transparent-checkbox');
            
            console.log('Save - Background color picker found:', !!bgColorPicker, 'Transparent checkbox:', !!bgTransparentCheckbox);
            
            const selectedColor = colorPicker ? colorPicker.value : '#1a1a1a';
            const selectedFont = fontPicker ? fontPicker.value : 'Inter, system-ui, sans-serif';
            const selectedFontSize = fontSizePicker ? fontSizePicker.value : '16px';
            const isBold = boldCheckbox ? boldCheckbox.checked : false;
            
            // Get background color - check checkbox first, then picker, then text input
            let selectedBgColor = 'transparent';
            if (bgTransparentCheckbox && bgTransparentCheckbox.checked) {
                selectedBgColor = 'transparent';
            } else if (bgColorText && bgColorText.value && bgColorText.value !== 'transparent') {
                selectedBgColor = bgColorText.value;
            } else if (bgColorPicker && bgColorPicker.value) {
                selectedBgColor = bgColorPicker.value;
            }
            
            console.log('Save - Selected background color:', selectedBgColor);
            
            // Debug: log the bold state being saved
            console.log('Bold checkbox found:', !!boldCheckbox, 'checked:', isBold, 'element:', boldCheckbox);
            
            const newContent = input.value.trim();
            const field = container.dataset.field;
            
            console.log('Save function called:', { 
                inputValue: input.value, 
                newContent: newContent, 
                field: field,
                container: container 
            });
            
            if (!field) {
                console.error('No field name found for editable element');
                showMessage('Error: Could not save - no field identifier found', 'error');
                return;
            }
            
            // Validate content is not empty
            if (!newContent || newContent.length === 0) {
                console.error('Content is empty, cannot save');
                showMessage('Error: Content cannot be empty', 'error');
                return;
            }
            
            // Save to localStorage first - use try/catch to handle errors
            try {
                const websiteContent = JSON.parse(localStorage.getItem('websiteContent') || '{}');
                websiteContent[field] = newContent;
                websiteContent[field + '_color'] = selectedColor;
                websiteContent[field + '_font'] = selectedFont;
                websiteContent[field + '_fontSize'] = selectedFontSize;
                websiteContent[field + '_bold'] = isBold;
                websiteContent[field + '_backgroundColor'] = selectedBgColor;
                localStorage.setItem('websiteContent', JSON.stringify(websiteContent));
                console.log('Saved to localStorage:', field, newContent, selectedColor, selectedFont, selectedFontSize, isBold, selectedBgColor);
            } catch (e) {
                console.error('Error saving to localStorage:', e);
                showMessage('Error saving changes: ' + e.message, 'error');
                return;
            }
            
            // COMPLETELY remove editing state and all child elements
            container.dataset.editing = 'false';
            container.classList.remove('editing');
            
            // Remove edit controls panel if it exists
            const editPanel = container.querySelector('.edit-controls-panel');
            if (editPanel) {
                editPanel.remove();
            }
            
            // Store original computed styles before clearing (to preserve button/link sizing)
            const originalComputedStyle = window.getComputedStyle(container);
            const originalDisplay = originalComputedStyle.display;
            const originalStyles = {
                display: originalComputedStyle.display,
                padding: originalComputedStyle.padding,
                paddingTop: originalComputedStyle.paddingTop,
                paddingRight: originalComputedStyle.paddingRight,
                paddingBottom: originalComputedStyle.paddingBottom,
                paddingLeft: originalComputedStyle.paddingLeft,
                fontSize: originalComputedStyle.fontSize,
                fontFamily: originalComputedStyle.fontFamily,
                fontWeight: originalComputedStyle.fontWeight,
                lineHeight: originalComputedStyle.lineHeight,
                border: originalComputedStyle.border,
                borderRadius: originalComputedStyle.borderRadius,
                backgroundColor: originalComputedStyle.backgroundColor,
                color: originalComputedStyle.color
            };
            
            // Store whether this is a button/link element (we need to preserve its structure)
            const isButtonOrLink = container.tagName === 'A' || container.tagName === 'BUTTON';
            
            // Remove EVERYTHING - all inputs, divs, buttons, labels, selects
            container.innerHTML = '';
            
            // For buttons and links, just update text content to preserve structure
            if (isButtonOrLink) {
                container.textContent = newContent;
            } else {
                // For other elements, create a span with the content
                const textSpan = document.createElement('span');
                textSpan.textContent = newContent;
                console.log('Created textSpan with content:', textSpan.textContent, 'Length:', textSpan.textContent.length);
                container.appendChild(textSpan);
            }
            console.log('Container innerHTML after append:', container.innerHTML);
            console.log('Container display before restore:', container.style.display, 'Computed:', window.getComputedStyle(container).display);
            
            // Restore original display style or use inline-block as fallback
            // But preserve block/inline-block/inline based on what makes sense
            if (originalDisplay && originalDisplay !== 'none' && originalDisplay !== 'inline') {
                container.style.display = originalDisplay;
            } else {
                // Default to inline-block for better layout control
                container.style.display = 'inline-block';
            }
            container.style.visibility = 'visible';
            container.style.opacity = '1';
            container.style.height = 'auto';
            container.style.width = 'auto';
            container.style.minHeight = '';
            container.style.minWidth = '';
            
            console.log('Container after styling - display:', container.style.display, 'Computed:', window.getComputedStyle(container).display, 'Visibility:', container.style.visibility, 'Opacity:', container.style.opacity);
            
            // Apply saved styles directly to the container, but preserve original sizing for buttons/links
            if (selectedColor) {
                container.style.color = selectedColor;
            }
            if (selectedBgColor) {
                if (selectedBgColor === 'transparent') {
                    container.style.backgroundColor = 'transparent';
                } else {
                    container.style.backgroundColor = selectedBgColor;
                }
            }
            if (selectedFont) {
                container.style.fontFamily = selectedFont;
            }
            
            // Get saved values from localStorage to check what was explicitly saved
            let savedFontSize = null;
            try {
                const savedContent = JSON.parse(localStorage.getItem('websiteContent') || '{}');
                savedFontSize = savedContent[field + '_fontSize'];
            } catch (e) {
                // If localStorage read fails, just use null
            }
            
            // For font size: only apply if explicitly changed, otherwise preserve original for buttons/links
            if (isButtonOrLink) {
                // For buttons/links, preserve original font size unless explicitly changed
                if (savedFontSize && savedFontSize !== originalStyles.fontSize) {
                    container.style.fontSize = selectedFontSize;
                } else {
                    // Restore original font size for buttons
                    container.style.fontSize = originalStyles.fontSize;
                }
                // Always restore padding, border, and other sizing for buttons
                container.style.padding = originalStyles.padding;
                container.style.border = originalStyles.border;
                container.style.borderRadius = originalStyles.borderRadius;
            } else {
                // For non-button elements, apply saved font size
                if (selectedFontSize) {
                    container.style.fontSize = selectedFontSize;
                }
            }
            if (isBold) {
                container.style.fontWeight = 'bold';
                container.style.setProperty('font-weight', 'bold', 'important');
                console.log('Applied bold styling');
            } else {
                container.style.fontWeight = 'normal';
                container.style.setProperty('font-weight', 'normal', 'important');
                console.log('Applied normal styling');
            }
            
            // Don't reset styling for buttons/links - we need to preserve their sizing
            // Only reset non-essential styles for non-button elements
            if (!isButtonOrLink) {
                container.style.borderColor = '';
                container.style.borderWidth = '';
                container.style.borderStyle = '';
            }
            // Keep border-radius, padding, etc. for buttons/links as they're already set above
            container.style.margin = '';
            container.style.cursor = 'pointer';
            container.style.outline = '';
            container.style.outlineWidth = '';
            container.style.boxShadow = '';
            container.style.position = '';
            container.style.transition = '';
            // Don't override display - keep it as set above
            container.style.overflow = '';
            container.style.visibility = 'visible';
            container.style.opacity = '1';
            
            // Show success message
            showMessage('Content, color, font, size, and bold saved successfully!', 'success');
            
            // Small delay to ensure DOM updates - but DON'T remove the span!
            setTimeout(() => {
                // Final check: ensure content span is still there
                const contentSpan = container.querySelector('span');
                if (!contentSpan || !contentSpan.textContent.trim()) {
                    console.error('ERROR: Content span missing after save! Recreating...');
                    // Recreate from localStorage as backup
                    try {
                        const websiteContent = JSON.parse(localStorage.getItem('websiteContent') || '{}');
                        const field = container.dataset.field;
                        if (websiteContent[field]) {
                            const backupSpan = document.createElement('span');
                            backupSpan.textContent = websiteContent[field];
                            if (websiteContent[field + '_color']) {
                                backupSpan.style.color = websiteContent[field + '_color'];
                            }
                            if (websiteContent[field + '_font']) {
                                backupSpan.style.fontFamily = websiteContent[field + '_font'];
                            }
                            if (websiteContent[field + '_fontSize']) {
                                backupSpan.style.fontSize = websiteContent[field + '_fontSize'];
                            }
                            container.innerHTML = ''; // Clear first
                            container.appendChild(backupSpan);
                            console.log('Recreated content span from localStorage');
                        }
                    } catch (e) {
                        console.error('Failed to recreate content:', e);
                    }
                } else {
                    console.log('Content span verified - text:', contentSpan.textContent);
                }
                
                // Make absolutely sure container is visible
                container.style.display = container.style.display || 'inline-block';
                container.style.visibility = 'visible';
                container.style.opacity = '1';
            }, 10);
        }

        function cancelEdit(button) {
            if (event) event.stopPropagation();
            const container = button.closest('.editable');
            if (!container) return;
            
            const field = container.dataset.field;
            
            // Restore original content from localStorage
            const websiteContent = JSON.parse(localStorage.getItem('websiteContent')) || {};
            const originalContent = websiteContent[field] || '';
            const originalColor = websiteContent[field + '_color'] || '';
            const originalFont = websiteContent[field + '_font'] || '';
            const originalFontSize = websiteContent[field + '_fontSize'] || '';
            
            // COMPLETELY remove editing state and all child elements
            container.dataset.editing = 'false';
            container.classList.remove('editing');
            
            // Remove edit controls panel if it exists
            const editPanel = container.querySelector('.edit-controls-panel');
            if (editPanel) {
                editPanel.remove();
            }
            
            // Remove EVERYTHING - all inputs, divs, buttons, labels, selects
            container.innerHTML = '';
            
            // Create a span element with the original content
            const textSpan = document.createElement('span');
            textSpan.textContent = originalContent || '';
            container.appendChild(textSpan);
            
            // Make sure the container is visible
            container.style.display = 'inline';
            container.style.visibility = 'visible';
            
            // Apply original styles
            if (originalColor) {
                container.style.color = originalColor;
            }
            if (originalFont) {
                container.style.fontFamily = originalFont;
            }
            if (originalFontSize) {
                container.style.fontSize = originalFontSize;
            }
            if (originalBold) {
                container.style.fontWeight = 'bold';
                container.style.setProperty('font-weight', 'bold', 'important');
                textSpan.style.fontWeight = 'bold';
                textSpan.style.setProperty('font-weight', 'bold', 'important');
            } else {
                container.style.fontWeight = 'normal';
                container.style.setProperty('font-weight', 'normal', 'important');
                textSpan.style.fontWeight = 'normal';
                textSpan.style.setProperty('font-weight', 'normal', 'important');
            }
            
            // Reset ALL styling to default
            container.style.background = '';
            container.style.backgroundColor = '';
            container.style.border = '';
            container.style.borderColor = '';
            container.style.borderWidth = '';
            container.style.borderStyle = '';
            container.style.borderRadius = '';
            container.style.padding = '';
            container.style.margin = '';
            container.style.cursor = 'pointer';
            container.style.outline = '';
            container.style.outlineWidth = '';
            container.style.boxShadow = '';
            container.style.position = '';
            container.style.transition = '';
            container.style.display = '';
            container.style.overflow = '';
            
            // Show cancel message
            showMessage('Changes cancelled', 'info');
            
            // Small delay to ensure DOM updates
            setTimeout(() => {
                // Double-check: remove any remaining child elements that aren't text nodes
                const children = Array.from(container.childNodes);
                children.forEach(child => {
                    if (child.nodeType !== Node.TEXT_NODE) {
                        container.removeChild(child);
                    }
                });
            }, 10);
        }

        // Load content from localStorage
        function loadWebsiteContent() {
            const websiteContent = JSON.parse(localStorage.getItem('websiteContent')) || {};
            
            // First, ensure the about-highlights section has its proper structure
            const highlightsSection = document.getElementById('about-highlights');
            if (highlightsSection) {
                // Reset to original structure if it's been corrupted
                if (!highlightsSection.querySelector('.grid.grid-cols-2')) {
                    highlightsSection.innerHTML = `
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-red)]/20">
                                <div class="text-sm font-semibold text-[color:var(--accent-red)] editable" data-field="about-founded-label">Founded</div>
                                <div class="mt-2 text-lg font-bold text-[color:var(--text-dark)] editable" data-field="about-founded">1963</div>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-red)]/20">
                                <div class="text-sm font-semibold text-[color:var(--accent-red)] editable" data-field="about-bond-single-label">Single Bond Cap.</div>
                                <div class="mt-2 text-lg font-bold text-[color:var(--text-dark)] editable" data-field="about-bond-single">$25M</div>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-red)]/20">
                                <div class="text-sm font-semibold text-[color:var(--accent-red)] editable" data-field="about-bond-aggregate-label">Aggregate Bond</div>
                                <div class="mt-2 text-lg font-bold text-[color:var(--text-dark)] editable" data-field="about-bond-aggregate">$55M</div>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-red)]/20">
                                <div class="text-sm font-semibold text-[color:var(--accent-red)] editable" data-field="about-offices-label">Offices</div>
                                <div class="mt-2 text-lg font-bold text-[color:var(--text-dark)] editable" data-field="about-offices">Pleasant Grove ‚Ä¢ Las Vegas ‚Ä¢ Elko</div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-blue)]/20">
                            <div class="text-sm font-semibold text-[color:var(--accent-blue)] editable" data-field="about-people-title">Our People</div>
                            <p class="text-sm text-[color:var(--text-light)] mt-2 editable" data-field="about-people">Journeyman & apprentice plumbers, sheet metal installers, pipefitters, welders ‚Äî experienced and project-ready.</p>
                        </div>
                    `;
                }
            }
            
            // Load all editable content with colors and fonts
            const editableElements = document.querySelectorAll('.editable');
            editableElements.forEach(element => {
                const field = element.dataset.field;
                
                // Special handling for hero-title to preserve HTML structure
                if (field === 'hero-title' || element.getAttribute('data-preserve-html') === 'true') {
                    // Don't override if the element already has the proper HTML structure
                    const currentHTML = element.innerHTML.trim();
                    if (currentHTML.includes('<br>') || currentHTML.includes('<span')) {
                        // Keep the current HTML structure - don't override
                    } else if (websiteContent[field]) {
                        // If there's no structure, try to preserve it from saved content
                        const savedContent = websiteContent[field];
                        if (savedContent && savedContent.includes('<br>')) {
                            element.innerHTML = savedContent;
                        } else if (savedContent) {
                            // Convert plain text to HTML with line breaks if needed
                            element.innerHTML = savedContent.replace(/\n/g, '<br>');
                        }
                    }
                } else if (websiteContent[field] && websiteContent[field].trim() !== '') {
                    // Only update content if there's actually saved content
                    element.textContent = websiteContent[field];
                }
                // Apply saved color if it exists
                if (websiteContent[field + '_color']) {
                    element.style.color = websiteContent[field + '_color'];
                }
                // Apply saved background color if it exists
                if (websiteContent[field + '_backgroundColor']) {
                    const bgColor = websiteContent[field + '_backgroundColor'];
                    if (bgColor === 'transparent') {
                        element.style.backgroundColor = 'transparent';
                    } else {
                        element.style.backgroundColor = bgColor;
                    }
                }
                // Apply saved font if it exists
                if (websiteContent[field + '_font']) {
                    element.style.fontFamily = websiteContent[field + '_font'];
                }
                // Apply saved font size if it exists
                if (websiteContent[field + '_fontSize']) {
                    element.style.fontSize = websiteContent[field + '_fontSize'];
                }
                // Apply saved bold state if it exists
                if (websiteContent[field + '_bold']) {
                    element.style.fontWeight = 'bold';
                    element.style.setProperty('font-weight', 'bold', 'important');
                    // Also apply to any child spans
                    const spans = element.querySelectorAll('span');
                    spans.forEach(span => {
                        span.style.fontWeight = 'bold';
                        span.style.setProperty('font-weight', 'bold', 'important');
                    });
                } else {
                    element.style.fontWeight = 'normal';
                    element.style.setProperty('font-weight', 'normal', 'important');
                    // Also apply to any child spans
                    const spans = element.querySelectorAll('span');
                    spans.forEach(span => {
                        span.style.fontWeight = 'normal';
                        span.style.setProperty('font-weight', 'normal', 'important');
                    });
                }
            });
        }

        // Image management functions
        function handleImageUpload(event, category = 'general') {
            const files = event.target.files;
            if (files.length > 0) {
                Array.from(files).forEach(file => {
                    if (file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const imageData = {
                                id: Date.now() + Math.random(),
                                name: file.name,
                                data: e.target.result,
                                size: file.size,
                                type: file.type,
                                category: category,
                                uploadDate: new Date().toISOString()
                            };
                            
                            // Save to both systems for compatibility
                            uploadedImages.push(imageData);
                            saveImages();
                            
                            // Also save to the images object for website loading
                            const images = JSON.parse(localStorage.getItem('images')) || {};
                            if (!images[category]) {
                                images[category] = [];
                            }
                            images[category].push(imageData);
                            localStorage.setItem('images', JSON.stringify(images));
                            
                            displayImageGallery();
                            updateImageStats();
                            loadHeroBackground(); // Reload hero background if it's a hero image
                            showMessage('Image uploaded successfully to ' + category + ' category!', 'success');
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        }

        function saveImages() {
            localStorage.setItem('uploadedImages', JSON.stringify(uploadedImages));
        }

        function loadImages() {
            const savedImages = localStorage.getItem('uploadedImages');
            if (savedImages) {
                uploadedImages = JSON.parse(savedImages);
                displayImageGallery();
                updateImageStats();
            }
        }

        function loadHeroBackground() {
            const images = JSON.parse(localStorage.getItem('images')) || {};
            
            // Load hero background image in live edit mode
            if (images.hero && images.hero.length > 0) {
                const heroImage = images.hero[0];
                const heroBackground = document.getElementById('live-edit-hero-background');
                if (heroBackground) {
                    heroBackground.style.backgroundImage = `url(${heroImage.data})`;
                }
            }
        }

        function loadAllSectionImages() {
            const images = JSON.parse(localStorage.getItem('images')) || {};
            
            // Load hero background
            loadHeroBackground();
            
            // Load other section images as needed
            // You can add more section image loading here
            // For example: about, services, portfolio, safety, etc.
        }

        function displayImageGallery(filter = 'all') {
            const gallery = document.getElementById('image-gallery');
            if (!gallery) return;
            
            gallery.innerHTML = '';

            const filteredImages = filter === 'all' ? uploadedImages : uploadedImages.filter(img => img.category === filter);

            filteredImages.forEach(image => {
                const imageDiv = document.createElement('div');
                imageDiv.className = 'relative bg-gray-800 rounded-lg overflow-hidden';
                imageDiv.innerHTML = 
                    '<img src="' + image.data + '" alt="' + image.name + '" class="w-full h-24 object-cover">' +
                    '<div class="p-2">' +
                        '<p class="text-xs text-gray-300 truncate" title="' + image.name + '">' + image.name + '</p>' +
                        '<p class="text-xs text-gray-500">' + formatFileSize(image.size) + '</p>' +
                        '<p class="text-xs text-blue-400">Category: ' + (image.category || 'general') + '</p>' +
                        '<div class="flex gap-1 mt-2">' +
                            '<button class="text-xs bg-blue-500 text-white px-2 py-1 rounded" onclick="copyImageUrl(\'' + image.id + '\')">Copy URL</button>' +
                            '<button class="text-xs bg-red-500 text-white px-2 py-1 rounded" onclick="deleteImage(\'' + image.id + '\')">Delete</button>' +
                        '</div>' +
                    '</div>';
                gallery.appendChild(imageDiv);
            });

            if (filteredImages.length === 0) {
                gallery.innerHTML = '<div class="col-span-2 text-center text-gray-400 py-8">No images in this category</div>';
            }
        }

        function filterImages() {
            const filter = document.getElementById('image-filter').value;
            displayImageGallery(filter);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function copyImageUrl(imageId) {
            const image = uploadedImages.find(img => img.id == imageId);
            if (image) {
                navigator.clipboard.writeText(image.data).then(() => {
                    showMessage('Image URL copied to clipboard!', 'success');
                }).catch(() => {
                    showMessage('Failed to copy URL', 'error');
                });
            }
        }

        function deleteImage(imageId) {
            if (confirm('Are you sure you want to delete this image?')) {
                // Find the image to get its category
                const imageToDelete = uploadedImages.find(img => img.id == imageId);
                
                // Remove from uploadedImages array
                uploadedImages = uploadedImages.filter(img => img.id != imageId);
                saveImages();
                
                // Also remove from images object
                if (imageToDelete) {
                    const images = JSON.parse(localStorage.getItem('images')) || {};
                    if (images[imageToDelete.category]) {
                        images[imageToDelete.category] = images[imageToDelete.category].filter(img => img.id != imageId);
                        localStorage.setItem('images', JSON.stringify(images));
                    }
                }
                
                displayImageGallery();
                updateImageStats();
                loadAllSectionImages(); // Reload section images
                showMessage('Image deleted successfully!', 'success');
            }
        }

        function clearAllImages() {
            if (confirm('Are you sure you want to delete ALL images? This action cannot be undone.')) {
                uploadedImages = [];
                saveImages();
                
                // Also clear the images object
                localStorage.removeItem('images');
                
                displayImageGallery();
                updateImageStats();
                loadAllSectionImages(); // Reload section images
                showMessage('All images deleted successfully!', 'success');
            }
        }

        function updateImageStats() {
            const totalImages = uploadedImages.length;
            const totalSize = uploadedImages.reduce((sum, img) => sum + img.size, 0);
            const categories = [...new Set(uploadedImages.map(img => img.category))].length;
            
            document.getElementById('total-images').textContent = totalImages;
            document.getElementById('total-size').textContent = formatFileSize(totalSize);
            document.getElementById('categories-count').textContent = categories;
        }

        // Testimonials management
        function loadTestimonials() {
            const savedTestimonials = localStorage.getItem('testimonials');
            if (savedTestimonials) {
                testimonials = JSON.parse(savedTestimonials);
            } else {
                testimonials = [
                    {
                        id: 1,
                        name: "John Smith",
                        title: "Facilities Manager",
                        company: "TechCorp Industries",
                        quote: "U.S. Mechanical delivered exceptional service on our HVAC upgrade project. Professional, timely, and exceeded expectations.",
                        rating: 5
                    }
                ];
                saveTestimonials();
            }
            displayTestimonials();
        }

        function displayTestimonials() {
            const container = document.getElementById('testimonials-list');
            if (!container) return;
            
            container.innerHTML = '';
            testimonials.forEach(testimonial => {
                const testimonialDiv = document.createElement('div');
                testimonialDiv.className = 'bg-gray-800 p-4 rounded-lg';
                testimonialDiv.innerHTML = 
                    '<div class="flex justify-between items-start mb-2">' +
                        '<h4 class="font-bold text-orange-400">' + testimonial.name + '</h4>' +
                        '<div class="flex gap-2">' +
                            '<button class="text-xs bg-blue-500 text-white px-2 py-1 rounded" onclick="editTestimonial(' + testimonial.id + ')">Edit</button>' +
                            '<button class="text-xs bg-red-500 text-white px-2 py-1 rounded" onclick="deleteTestimonial(' + testimonial.id + ')">Delete</button>' +
                        '</div>' +
                    '</div>' +
                    '<p class="text-sm text-gray-300 mb-2">' + testimonial.title + ', ' + testimonial.company + '</p>' +
                    '<p class="text-sm text-gray-400 mb-2">"' + testimonial.quote + '"</p>' +
                    '<div class="text-yellow-400">' + '‚òÖ'.repeat(testimonial.rating) + '‚òÜ'.repeat(5-testimonial.rating) + '</div>';
                container.appendChild(testimonialDiv);
            });
        }

        function addTestimonial() {
            const name = prompt('Enter testimonial name:');
            if (!name) return;
            
            const title = prompt('Enter job title:');
            const company = prompt('Enter company:');
            const quote = prompt('Enter testimonial quote:');
            const rating = parseInt(prompt('Enter rating (1-5):')) || 5;
            
            const testimonial = {
                id: Date.now(),
                name: name,
                title: title,
                company: company,
                quote: quote,
                rating: rating
            };
            
            testimonials.push(testimonial);
            saveTestimonials();
            displayTestimonials();
            showMessage('Testimonial added successfully!', 'success');
        }

        function editTestimonial(id) {
            const testimonial = testimonials.find(t => t.id === id);
            if (!testimonial) return;
            
            const name = prompt('Enter testimonial name:', testimonial.name);
            if (name === null) return;
            
            testimonial.name = name;
            testimonial.title = prompt('Enter job title:', testimonial.title);
            testimonial.company = prompt('Enter company:', testimonial.company);
            testimonial.quote = prompt('Enter testimonial quote:', testimonial.quote);
            testimonial.rating = parseInt(prompt('Enter rating (1-5):', testimonial.rating)) || 5;
            
            saveTestimonials();
            displayTestimonials();
            showMessage('Testimonial updated successfully!', 'success');
        }

        function deleteTestimonial(id) {
            if (confirm('Are you sure you want to delete this testimonial?')) {
                testimonials = testimonials.filter(t => t.id !== id);
                saveTestimonials();
                displayTestimonials();
                showMessage('Testimonial deleted successfully!', 'success');
            }
        }

        function saveTestimonials() {
            localStorage.setItem('testimonials', JSON.stringify(testimonials));
        }

        // Projects management
        function loadProjects() {
            const savedProjects = localStorage.getItem('projects');
            if (savedProjects) {
                projects = JSON.parse(savedProjects);
            } else {
                projects = [
                    {
                        id: 1,
                        title: "Downtown Office Complex HVAC Upgrade",
                        description: "Complete HVAC system replacement for 50-story office building",
                        image: "https://via.placeholder.com/400x300?text=Office+HVAC",
                        category: "HVAC",
                        year: "2024"
                    }
                ];
                saveProjects();
            }
            displayProjects();
        }

        function displayProjects() {
            const container = document.getElementById('projects-list');
            if (!container) return;
            
            container.innerHTML = '';
            projects.forEach(project => {
                const projectDiv = document.createElement('div');
                projectDiv.className = 'bg-gray-800 p-4 rounded-lg';
                projectDiv.innerHTML = 
                    '<div class="flex justify-between items-start mb-2">' +
                        '<h4 class="font-bold text-orange-400">' + project.title + '</h4>' +
                        '<div class="flex gap-2">' +
                            '<button class="text-xs bg-blue-500 text-white px-2 py-1 rounded" onclick="editProject(' + project.id + ')">Edit</button>' +
                            '<button class="text-xs bg-red-500 text-white px-2 py-1 rounded" onclick="deleteProject(' + project.id + ')">Delete</button>' +
                        '</div>' +
                    '</div>' +
                    '<p class="text-sm text-gray-300 mb-2">' + project.description + '</p>' +
                    '<p class="text-xs text-gray-400">Category: ' + project.category + ' | Year: ' + project.year + '</p>';
                container.appendChild(projectDiv);
            });
        }

        function addProject() {
            const title = prompt('Enter project title:');
            if (!title) return;
            
            const description = prompt('Enter project description:');
            const category = prompt('Enter project category:');
            const year = prompt('Enter project year:', new Date().getFullYear());
            
            const project = {
                id: Date.now(),
                title: title,
                description: description,
                image: "https://via.placeholder.com/400x300?text=Project+Image",
                category: category,
                year: year
            };
            
            projects.push(project);
            saveProjects();
            displayProjects();
            showMessage('Project added successfully!', 'success');
        }

        function editProject(id) {
            const project = projects.find(p => p.id === id);
            if (!project) return;
            
            const title = prompt('Enter project title:', project.title);
            if (title === null) return;
            
            project.title = title;
            project.description = prompt('Enter project description:', project.description);
            project.category = prompt('Enter project category:', project.category);
            project.year = prompt('Enter project year:', project.year);
            
            saveProjects();
            displayProjects();
            showMessage('Project updated successfully!', 'success');
        }

        function deleteProject(id) {
            if (confirm('Are you sure you want to delete this project?')) {
                projects = projects.filter(p => p.id !== id);
                saveProjects();
                displayProjects();
                showMessage('Project deleted successfully!', 'success');
            }
        }

        function saveProjects() {
            localStorage.setItem('projects', JSON.stringify(projects));
        }

        // Content management functions
        function editHomepageContent() {
            showMessage('Homepage content editor would open here', 'info');
        }

        function editHeroSection() {
            showMessage('Hero section editor would open here', 'info');
        }

        function editAboutSection() {
            showMessage('About section editor would open here', 'info');
        }

        function editServicesSection() {
            showMessage('Services section editor would open here', 'info');
        }

        function editAboutPage() {
            showMessage('About page editor would open here', 'info');
        }

        function editHVACPage() {
            showMessage('HVAC page editor would open here', 'info');
        }

        function editHydronicPage() {
            showMessage('Hydronic page editor would open here', 'info');
        }

        function editContactInfo() {
            showMessage('Contact info editor would open here', 'info');
        }

        // Admin toolbar functions
        function saveAllChanges() {
            showMessage('All changes saved successfully!', 'success');
        }

        function previewMode() {
            isPreviewMode = !isPreviewMode;
            document.body.classList.toggle('preview-mode', isPreviewMode);
            showMessage(isPreviewMode ? 'Preview mode enabled' : 'Preview mode disabled', 'info');
        }

        function exportContent() {
            const data = {
                websiteContent: JSON.parse(localStorage.getItem('websiteContent')) || {},
                testimonials: JSON.parse(localStorage.getItem('testimonials')) || [],
                projects: JSON.parse(localStorage.getItem('projects')) || [],
                uploadedImages: JSON.parse(localStorage.getItem('uploadedImages')) || []
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'us-mechanical-data.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showMessage('Content exported successfully!', 'success');
        }

        function importContent() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.websiteContent) localStorage.setItem('websiteContent', JSON.stringify(data.websiteContent));
                            if (data.testimonials) localStorage.setItem('testimonials', JSON.stringify(data.testimonials));
                            if (data.projects) localStorage.setItem('projects', JSON.stringify(data.projects));
                            if (data.uploadedImages) localStorage.setItem('uploadedImages', JSON.stringify(data.uploadedImages));
                            
                            location.reload();
                            showMessage('Content imported successfully!', 'success');
                        } catch (error) {
                            showMessage('Error importing content: ' + error.message, 'error');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function debugSavedData() {
            const websiteContent = JSON.parse(localStorage.getItem('websiteContent')) || {};
            console.log('Saved website content:', websiteContent);
            alert('Check browser console for saved data. Found ' + Object.keys(websiteContent).length + ' saved items.');
        }

        function resetToDefault() {
            if (confirm('Are you sure you want to reset all content to default? This will overwrite all your changes.')) {
                localStorage.removeItem('websiteContent');
                localStorage.removeItem('testimonials');
                localStorage.removeItem('projects');
                localStorage.removeItem('uploadedImages');
                location.reload();
            }
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear ALL data? This action cannot be undone.')) {
                localStorage.clear();
                location.reload();
            }
        }

        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'success' ? 
                'fixed top-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50' :
                type === 'error' ? 
                'fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50' :
                'fixed top-4 right-4 bg-blue-500 text-white p-4 rounded-lg shadow-lg z-50';
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>
