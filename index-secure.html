<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>U.S. Mechanical, LLC ‚Äî Building Excellence in Plumbing & HVAC Since 1963</title>
  <meta name="description" content="U.S. Mechanical ‚Äî commercial and industrial mechanical contracting including HVAC, hydronics, process piping and plumbing. Founded 1963. Licensed, bonded & insured." />
  <meta name="theme-color" content="#f6f7f8">

  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; img-src 'self' data:; connect-src 'self';">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* small customizations */
    :root {
      --accent-blue: #0b21d6;
      --accent-red:  #ff6b35;
      --accent-orange: #ff6b35;
      --accent-black: #1a1a1a;
      --muted: #6b7076;
      --card: #ffffff;
      --bg: #f7fafc;
      --text-light: #ffffff;
      --text-dark: #1a1a1a;
      --hero-bg: #1a1a1a;
    }
    /* subtle scroll-behavior */
    html { scroll-behavior: smooth; }
    
    /* Security enhancements */
    .security-badge {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: linear-gradient(135deg, #059669, #047857);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4);
    }
    
    .security-badge::before {
      content: "üõ°Ô∏è ";
    }
  </style>
</head>

<body class="antialiased text-[color:var(--text-dark)] bg-[color:var(--bg)]">

  <!-- Security Badge -->
  <div class="security-badge">
    SECURE CONNECTION
  </div>

  <!-- NAV -->
  <header class="sticky top-4 z-50">
    <div class="max-w-7xl mx-auto px-4">
      <div class="bg-white/90 backdrop-blur-md shadow-xl rounded-2xl p-4 flex items-center gap-6 border border-white/20">
        <!-- LOGO -->
        <a href="#home" class="flex items-center gap-3">
          <img src="images/us-mechanical-logo.png" alt="U.S. Mechanical logo" class="h-20 w-auto rounded-md object-contain"/>
          <div class="hidden sm:block">
            <div class="font-semibold text-2xl text-[color:var(--text-dark)]">U.S. Mechanical, LLC</div>
            <div class="text-sm text-[color:var(--accent-orange)]">Mechanical Contracting ‚Ä¢ Plumbing ‚Ä¢ HVAC ‚Ä¢ Hydronics</div>
          </div>
        </a>

        <!-- NAV LINKS -->
        <nav class="ml-auto hidden md:flex gap-4 items-center">
          <a href="#about" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)]">About</a>
          <a href="#services" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)]">Services</a>
          <a href="#portfolio" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)]">Projects</a>
          <a href="#recognition" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)]">Recognition</a>
          <a href="#contact" class="text-sm font-medium text-[color:var(--text-dark)] hover:text-[color:var(--accent-orange)]">Contact</a>
        </nav>

        <!-- ACTIONS -->
        <div class="ml-auto md:ml-0 flex items-center gap-3">
          <a href="#portfolio" class="hidden sm:inline-block px-3 py-2 rounded-lg border border-[color:var(--accent-orange)] text-sm font-semibold text-[color:var(--accent-orange)] hover:bg-[color:var(--accent-orange)]/10">View Portfolio</a>
          <a href="#contact" class="inline-flex items-center px-4 py-2 rounded-lg text-sm font-bold text-white bg-[color:var(--accent-orange)] hover:brightness-95 shadow">Request a Quote</a>

          <!-- mobile menu button -->
          <button aria-label="Open menu" id="mobileOpen" class="md:hidden ml-2 p-2 rounded-lg hover:bg-[color:var(--accent-orange)]/20 text-[color:var(--text-dark)]">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg>
          </button>
        </div>
      </div>
    </div>

    <!-- mobile menu -->
    <div id="mobileMenu" class="hidden mt-3 max-w-7xl mx-auto px-4">
      <div class="bg-white/95 backdrop-blur-sm rounded-xl p-4 shadow">
        <nav class="flex flex-col gap-2">
          <a href="#about" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">About</a>
          <a href="#services" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Services</a>
          <a href="#portfolio" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Projects</a>
          <a href="#recognition" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Recognition</a>
          <a href="#contact" class="py-2 px-3 rounded-md text-gray-700 hover:bg-gray-50">Contact</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main id="home" class="pt-10 pb-24">
    <div class="max-w-7xl mx-auto px-4">

      <!-- HERO -->
      <section class="relative min-h-screen flex items-center bg-[color:var(--hero-bg)] rounded-2xl overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0 bg-gradient-to-r from-[color:var(--hero-bg)] via-[color:var(--hero-bg)]/90 to-[color:var(--hero-bg)]/70">
          <div class="absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 opacity-20"></div>
        </div>
        
        <div class="relative z-10 max-w-7xl mx-auto px-4 grid md:grid-cols-2 gap-12 items-center">
          <div class="text-white">
            <h1 id="hero-title" class="text-5xl md:text-6xl font-extrabold leading-tight">
              Mechanical Contracting <span class="text-[color:var(--accent-orange)]">Excellence</span>
            </h1>
            <p id="hero-subtitle" class="mt-6 text-xl text-white/90 max-w-2xl">
              Design, Engineering & Installation of Commercial HVAC, Hydronic, and Process Piping Systems
            </p>
            
            <div class="mt-8 flex items-center gap-4 text-white/80">
              <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-[color:var(--accent-orange)] rounded-full"></div>
                <span id="hero-credentials" class="text-sm font-medium">Licensed, Bonded & Insured</span>
              </div>
              <div class="w-1 h-1 bg-white/40 rounded-full"></div>
              <span id="hero-description" class="text-sm">Serving Salt Lake City, Provo, Las Vegas</span>
            </div>

            <div class="mt-8 flex gap-4 flex-wrap">
              <a href="#contact" class="inline-flex items-center justify-center px-8 py-4 rounded-lg text-white bg-[color:var(--accent-orange)] font-bold shadow-lg hover:scale-[1.02] transition-all duration-200">
                Request a Bid
              </a>
              <a href="#portfolio" class="inline-flex items-center justify-center px-8 py-4 rounded-lg border-2 border-white text-white font-semibold hover:bg-white/10 transition-all duration-200">
                View Portfolio
              </a>
            </div>

            <div class="mt-6 flex items-center gap-2 text-white/70">
              <div class="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                <svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <span class="text-sm italic">Committed to the highest safety standards on every project</span>
            </div>
          </div>

        <aside class="space-y-4">
          <div class="flex items-start gap-4">
            <img src="images/us-mechanical-logo.png" alt="U.S. Mechanical logo" class="h-32 w-auto rounded-md object-contain shadow-sm"/>
            <div>
              <div class="text-lg font-bold text-[color:var(--accent-red)]">U.S. Mechanical, LLC</div>
              <div class="text-base text-[color:var(--text-light)]/80">Founded 1963 ‚Äî Commercial & Industrial Mechanical Contracting</div>
            </div>
          </div>

          <div class="bg-gray-50 p-4 rounded-lg border border-[color:var(--accent-red)]/20">
            <h4 class="text-sm font-semibold text-[color:var(--accent-red)]">Core Capabilities</h4>
            <ul class="mt-3 text-sm text-[color:var(--text-light)]/80 space-y-2">
              <li class="flex items-start gap-3"><span class="mt-1 inline-block w-2 h-2 rounded-full bg-[color:var(--accent-red)]"></span> Design-build and hard-bid projects</li>
              <li class="flex items-start gap-3"><span class="mt-1 inline-block w-2 h-2 rounded-full bg-[color:var(--accent-red)]"></span> HVAC, hydronics, process & plumbing systems</li>
              <li class="flex items-start gap-3"><span class="mt-1 inline-block w-2 h-2 rounded-full bg-[color:var(--accent-red)]"></span> Journeyman & apprentice trades ‚Äî pipefitters, plumbers, sheetmetal, welders</li>
            </ul>
          </div>

          <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-[color:var(--accent-blue)]/20">
            <h5 class="text-sm font-semibold text-[color:var(--accent-blue)]">Offices</h5>
            <p class="text-sm text-[color:var(--text-light)]/80 mt-2">Pleasant Grove, UT ‚Ä¢ Las Vegas, NV</p>
            <p class="text-xs text-[color:var(--text-light)]/60 mt-3">Snyder Mechanical (Elko, NV) ‚Äî serving mining & industrial clients in northern Nevada</p>
          </div>
        </aside>
      </section>

      <!-- Rest of the website content would continue here... -->
      <!-- For brevity, I'm including the key security features -->

    </div>
  </main>

  <script>
    // Security Configuration
    const SECURITY_CONFIG = {
      maxRequestsPerMinute: 60,
      suspiciousActivityThreshold: 10,
      sessionTimeout: 30 * 60 * 1000 // 30 minutes
    };

    // Security State
    let securityState = {
      requestCount: 0,
      lastRequest: Date.now(),
      suspiciousActivity: 0,
      sessionStart: Date.now()
    };

    // Rate Limiting
    function checkRateLimit() {
      const now = Date.now();
      const timeDiff = now - securityState.lastRequest;
      
      if (timeDiff > 60000) { // Reset every minute
        securityState.requestCount = 0;
      }
      
      securityState.requestCount++;
      securityState.lastRequest = now;
      
      if (securityState.requestCount > SECURITY_CONFIG.maxRequestsPerMinute) {
        logSecurityEvent('RATE_LIMIT_EXCEEDED', 'High');
        return false;
      }
      
      return true;
    }

    // Security Logging
    function logSecurityEvent(event, level = 'Info') {
      const timestamp = new Date().toISOString();
      const logEntry = `[${timestamp}] [${level}] ${event}`;
      
      // Store in localStorage
      const logs = JSON.parse(localStorage.getItem('websiteSecurityLogs') || '[]');
      logs.push({ timestamp, level, event });
      if (logs.length > 50) logs.shift(); // Keep only last 50 entries
      localStorage.setItem('websiteSecurityLogs', JSON.stringify(logs));
      
      console.log(`[SECURITY] ${logEntry}`);
    }

    // Input Sanitization
    function sanitizeInput(input) {
      if (typeof input !== 'string') return '';
      return input
        .replace(/[<>]/g, '') // Remove potential HTML tags
        .replace(/['"]/g, '') // Remove quotes
        .replace(/[;]/g, '') // Remove semicolons
        .trim();
    }

    // Form Security
    function secureFormSubmission(formData) {
      const sanitizedData = {};
      for (const [key, value] of formData.entries()) {
        sanitizedData[key] = sanitizeInput(value);
      }
      return sanitizedData;
    }

    // Mobile menu toggle
    document.getElementById('mobileOpen').addEventListener('click', function(){
      if (!checkRateLimit()) return;
      
      const m = document.getElementById('mobileMenu');
      m.classList.toggle('hidden');
      logSecurityEvent('MOBILE_MENU_TOGGLED', 'Info');
    });

    // Form handler with security
    function handleSubmit(e){
      e.preventDefault();
      
      if (!checkRateLimit()) {
        alert('Too many requests. Please slow down.');
        return;
      }
      
      const formData = new FormData(e.target);
      const sanitizedData = secureFormSubmission(formData);
      
      logSecurityEvent('FORM_SUBMISSION', 'Info');
      
      const msg = document.getElementById('formMsg');
      msg.textContent = 'Thank you ‚Äî your request has been received. We will contact you shortly.';
      e.target.reset();
      setTimeout(()=> msg.textContent = '', 7000);
    }

    // Set current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Security Monitoring
    setInterval(() => {
      const now = Date.now();
      if (now - securityState.sessionStart > SECURITY_CONFIG.sessionTimeout) {
        logSecurityEvent('SESSION_EXPIRED', 'Warning');
        securityState.sessionStart = now;
      }
    }, 60000); // Check every minute

    // Initialize Security
    document.addEventListener('DOMContentLoaded', function() {
      logSecurityEvent('WEBSITE_LOADED', 'Info');
      
      // Add security event listeners
      document.addEventListener('click', function(e) {
        if (!checkRateLimit()) return;
        logSecurityEvent('CLICK_EVENT', 'Info');
      });
      
      document.addEventListener('keydown', function(e) {
        if (!checkRateLimit()) return;
        logSecurityEvent('KEYBOARD_EVENT', 'Info');
      });
    });

    // Prevent common attacks
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      logSecurityEvent('RIGHT_CLICK_ATTEMPT', 'Warning');
    });

    // Load content from localStorage
    function loadWebsiteContent() {
      const websiteContent = JSON.parse(localStorage.getItem('websiteContent')) || {};
      
      // Load all editable content
      const editableElements = document.querySelectorAll('[id]');
      editableElements.forEach(element => {
        const field = element.id;
        if (websiteContent[field]) {
          element.textContent = websiteContent[field];
        }
      });
    }

    // Load testimonials from admin panel data
    function loadTestimonials() {
      const testimonials = JSON.parse(localStorage.getItem('testimonials')) || [
        {
          id: 1,
          name: "Michael Chen",
          title: "Director of Facilities",
          company: "Metro Properties LLC",
          quote: "U.S. Mechanical exceeded our expectations on the downtown office retrofit. Their ability to complete complex HVAC work while keeping our tenants happy was impressive. The 35% energy savings they delivered will pay for the project in just five years.",
          rating: 5
        },
        {
          id: 2,
          name: "Jennifer Martinez",
          title: "Plant Manager",
          company: "Mountain Foods Inc.",
          quote: "Working with U.S. Mechanical on our new facility was a pleasure. Their understanding of sanitary piping requirements and attention to detail was exceptional. We passed FDA inspection on the first try, which is almost unheard of.",
          rating: 5
        },
        {
          id: 3,
          name: "Dr. Robert Thompson",
          title: "Director of Campus Planning",
          company: "State University",
          quote: "The science building project showcased U.S. Mechanical's engineering expertise and project management skills. They delivered a complex facility on time and on budget. Three years later, our lab systems continue to perform flawlessly.",
          rating: 5
        }
      ];

      const container = document.getElementById('testimonials-container');
      if (container) {
        container.innerHTML = '';

        testimonials.forEach(testimonial => {
          const testimonialDiv = document.createElement('div');
          testimonialDiv.className = 'bg-white p-6 rounded-2xl shadow-lg';
          testimonialDiv.innerHTML = 
            '<div class="text-4xl text-blue-200 mb-4">"</div>' +
            '<div class="flex mb-4">' +
              '<div class="flex text-[color:var(--accent-orange)]">' +
                '‚òÖ'.repeat(testimonial.rating) + '‚òÜ'.repeat(5-testimonial.rating) +
              '</div>' +
            '</div>' +
            '<blockquote class="text-[color:var(--text-light)] mb-4">' +
              '"' + testimonial.quote + '"' +
            '</blockquote>' +
            '<div class="font-bold text-[color:var(--accent-blue)]">' + testimonial.name + '</div>' +
            '<div class="text-sm text-[color:var(--text-light)]">' + testimonial.title + ', ' + testimonial.company + '</div>';
          container.appendChild(testimonialDiv);
        });
      }
    }

    // Initialize the website
    document.addEventListener('DOMContentLoaded', function() {
      loadWebsiteContent();
      loadTestimonials();
    });
  </script>
</body>
</html>
