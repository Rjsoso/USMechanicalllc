<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>U.S. Mechanical Admin Panel ‚Äî Secure Access</title>
  <meta name="description" content="U.S. Mechanical Admin Panel - Secure Content Management" />
  <meta name="theme-color" content="#f6f7f8">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; img-src 'self' data:; connect-src 'self';">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Security-focused styles */
    :root {
      --accent-blue: #0b21d6;
      --accent-red:  #ff6b35;
      --accent-orange: #ff6b35;
      --accent-black: #1a1a1a;
      --muted: #6b7076;
      --card: #ffffff;
      --bg: #f7fafc;
      --text-light: #ffffff;
      --text-dark: #1a1a1a;
      --hero-bg: #1a1a1a;
      --security-red: #dc2626;
      --security-green: #059669;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      color: #ffffff;
      min-height: 100vh;
    }
    
    .login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    }
    
    .login-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      width: 100%;
    }
    
    .security-indicator {
      position: fixed;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, #059669, #047857);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4);
    }
    
    .security-warning {
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 1rem;
      font-size: 14px;
      text-align: center;
    }
    
    .input-field {
      width: 100%;
      padding: 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      margin-bottom: 1rem;
      color: white;
      backdrop-filter: blur(10px);
    }
    
    .input-field::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    
    .input-field:focus {
      outline: none;
      border-color: #ff6b35;
      box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #ff6b35 0%, #e05a2a 100%);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      width: 100%;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
    }
    
    .btn-primary:disabled {
      background: #6b7280;
      cursor: not-allowed;
      transform: none;
    }
    
    .security-log {
      background: rgba(0, 0, 0, 0.8);
      color: #10b981;
      padding: 1rem;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 1rem;
    }
    
    .hidden {
      display: none !important;
    }
    
    .admin-dashboard {
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .security-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .threat-level {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 8px;
    }
    
    .threat-low {
      background: #059669;
      color: white;
    }
    
    .threat-medium {
      background: #d97706;
      color: white;
    }
    
    .threat-high {
      background: #dc2626;
      color: white;
    }
  </style>
</head>

<body>
  <!-- Security Indicator -->
  <div class="security-indicator" id="securityIndicator">
    üîí SECURE CONNECTION
  </div>

  <!-- Login Screen -->
  <div id="loginScreen" class="login-container">
    <div class="login-card">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold mb-4 bg-gradient-to-r from-orange-400 to-red-500 bg-clip-text text-transparent">
          U.S. Mechanical Admin
        </h1>
        <p class="text-gray-300">Secure Content Management System</p>
      </div>

      <div class="security-warning">
        ‚ö†Ô∏è This is a restricted access area. All activities are logged and monitored.
      </div>

      <form id="loginForm">
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-300 mb-2">Username</label>
          <input type="text" id="username" class="input-field" placeholder="Enter username" required autocomplete="username">
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-300 mb-2">Password</label>
          <input type="password" id="password" class="input-field" placeholder="Enter password" required autocomplete="current-password">
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-300 mb-2">Security Code</label>
          <input type="text" id="securityCode" class="input-field" placeholder="Enter 2FA code" required>
        </div>
        
        <button type="submit" class="btn-primary" id="loginBtn">
          üîê Authenticate
        </button>
      </form>

      <div class="security-log" id="securityLog">
        [SYSTEM] Security system initialized<br>
        [AUTH] Waiting for authentication...<br>
      </div>
    </div>
  </div>

  <!-- Admin Dashboard -->
  <div id="adminDashboard" class="admin-dashboard hidden">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-orange-400 to-red-500 bg-clip-text text-transparent">
        U.S. Mechanical Admin Dashboard
      </h1>
      <p class="text-xl text-gray-300">Secure Content Management</p>
    </div>

    <!-- Security Status -->
    <div class="security-card">
      <h2 class="text-2xl font-bold mb-4 text-green-400">üõ°Ô∏è Security Status</h2>
      <div class="grid md:grid-cols-3 gap-6">
        <div>
          <h3 class="text-lg font-semibold mb-2">Authentication</h3>
          <p class="text-green-400">‚úÖ Secure</p>
          <p class="text-sm text-gray-400">Multi-factor authentication active</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-2">Threat Level</h3>
          <p class="text-green-400">üü¢ Low</p>
          <p class="text-sm text-gray-400">No suspicious activity detected</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-2">Session</h3>
          <p class="text-green-400">üîí Active</p>
          <p class="text-sm text-gray-400">Session expires in 30 minutes</p>
        </div>
      </div>
    </div>

    <!-- Content Management -->
    <div class="security-card">
      <h2 class="text-2xl font-bold mb-4 text-blue-400">üìù Content Management</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-semibold mb-4">Website Content</h3>
          <div class="space-y-3">
            <button class="btn-primary w-full" onclick="editContent('homepage')">Edit Homepage</button>
            <button class="btn-primary w-full" onclick="editContent('about')">Edit About Page</button>
            <button class="btn-primary w-full" onclick="editContent('services')">Edit Services</button>
            <button class="btn-primary w-full" onclick="editContent('contact')">Edit Contact Info</button>
          </div>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Media Management</h3>
          <div class="space-y-3">
            <button class="btn-primary w-full" onclick="manageImages()">Manage Images</button>
            <button class="btn-primary w-full" onclick="manageTestimonials()">Manage Testimonials</button>
            <button class="btn-primary w-full" onclick="manageProjects()">Manage Projects</button>
            <button class="btn-primary w-full" onclick="viewAnalytics()">View Analytics</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Security Controls -->
    <div class="security-card">
      <h2 class="text-2xl font-bold mb-4 text-red-400">üîí Security Controls</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-semibold mb-4">Access Control</h3>
          <div class="space-y-3">
            <button class="btn-primary w-full" onclick="changePassword()">Change Password</button>
            <button class="btn-primary w-full" onclick="viewAccessLogs()">View Access Logs</button>
            <button class="btn-primary w-full" onclick="manageUsers()">Manage Users</button>
          </div>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">System Security</h3>
          <div class="space-y-3">
            <button class="btn-primary w-full" onclick="backupData()">Backup Data</button>
            <button class="btn-primary w-full" onclick="scanSecurity()">Security Scan</button>
            <button class="btn-primary w-full" onclick="logout()">Logout</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Activity Log -->
    <div class="security-card">
      <h2 class="text-2xl font-bold mb-4 text-yellow-400">üìä Activity Log</h2>
      <div class="security-log" id="activityLog">
        [SYSTEM] Admin dashboard loaded<br>
        [AUTH] User authenticated successfully<br>
        [SECURITY] All security checks passed<br>
      </div>
    </div>
  </div>

  <script>
    // Security Configuration
    const SECURITY_CONFIG = {
      maxLoginAttempts: 3,
      sessionTimeout: 30 * 60 * 1000, // 30 minutes
      rateLimitWindow: 5 * 60 * 1000, // 5 minutes
      maxRequestsPerWindow: 100
    };

    // Security State
    let securityState = {
      isAuthenticated: false,
      loginAttempts: 0,
      sessionStart: null,
      requestCount: 0,
      lastRequest: Date.now(),
      threatLevel: 'low'
    };

    // Rate Limiting
    function checkRateLimit() {
      const now = Date.now();
      if (now - securityState.lastRequest > SECURITY_CONFIG.rateLimitWindow) {
        securityState.requestCount = 0;
      }
      securityState.requestCount++;
      securityState.lastRequest = now;
      
      if (securityState.requestCount > SECURITY_CONFIG.maxRequestsPerWindow) {
        logSecurityEvent('RATE_LIMIT_EXCEEDED', 'High');
        alert('Rate limit exceeded. Please slow down your requests.');
        return false;
      }
      return true;
    }

    // Security Logging
    function logSecurityEvent(event, level = 'Info') {
      const timestamp = new Date().toISOString();
      const logEntry = `[${timestamp}] [${level}] ${event}`;
      
      // Update activity log
      const activityLog = document.getElementById('activityLog');
      if (activityLog) {
        activityLog.innerHTML += logEntry + '<br>';
        activityLog.scrollTop = activityLog.scrollHeight;
      }
      
      // Store in localStorage for persistence
      const logs = JSON.parse(localStorage.getItem('securityLogs') || '[]');
      logs.push({ timestamp, level, event });
      if (logs.length > 100) logs.shift(); // Keep only last 100 entries
      localStorage.setItem('securityLogs', JSON.stringify(logs));
      
      console.log(`[SECURITY] ${logEntry}`);
    }

    // Input Sanitization
    function sanitizeInput(input) {
      if (typeof input !== 'string') return '';
      return input
        .replace(/[<>]/g, '') // Remove potential HTML tags
        .replace(/['"]/g, '') // Remove quotes
        .replace(/[;]/g, '') // Remove semicolons
        .trim();
    }

    // Authentication
    function authenticate(username, password, securityCode) {
      // Simulate authentication (in real implementation, this would be server-side)
      const validCredentials = {
        username: 'admin',
        password: 'usmechanical2024',
        securityCode: '123456'
      };

      if (username === validCredentials.username && 
          password === validCredentials.password && 
          securityCode === validCredentials.securityCode) {
        securityState.isAuthenticated = true;
        securityState.sessionStart = Date.now();
        securityState.loginAttempts = 0;
        logSecurityEvent('AUTHENTICATION_SUCCESS', 'Info');
        return true;
      } else {
        securityState.loginAttempts++;
        logSecurityEvent(`AUTHENTICATION_FAILED (Attempt ${securityState.loginAttempts})`, 'Warning');
        
        if (securityState.loginAttempts >= SECURITY_CONFIG.maxLoginAttempts) {
          logSecurityEvent('ACCOUNT_LOCKED', 'Critical');
          alert('Too many failed attempts. Account locked.');
          return false;
        }
        return false;
      }
    }

    // Session Management
    function checkSession() {
      if (!securityState.isAuthenticated) return false;
      
      const now = Date.now();
      if (now - securityState.sessionStart > SECURITY_CONFIG.sessionTimeout) {
        logSecurityEvent('SESSION_EXPIRED', 'Warning');
        logout();
        return false;
      }
      return true;
    }

    // Login Handler
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      if (!checkRateLimit()) return;
      
      const username = sanitizeInput(document.getElementById('username').value);
      const password = sanitizeInput(document.getElementById('password').value);
      const securityCode = sanitizeInput(document.getElementById('securityCode').value);
      
      if (authenticate(username, password, securityCode)) {
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('adminDashboard').classList.remove('hidden');
        updateSecurityIndicator();
        logSecurityEvent('ADMIN_DASHBOARD_ACCESSED', 'Info');
      } else {
        alert('Invalid credentials. Please try again.');
        document.getElementById('loginForm').reset();
      }
    });

    // Update Security Indicator
    function updateSecurityIndicator() {
      const indicator = document.getElementById('securityIndicator');
      if (securityState.isAuthenticated) {
        indicator.innerHTML = 'üîí AUTHENTICATED';
        indicator.style.background = 'linear-gradient(135deg, #059669, #047857)';
      } else {
        indicator.innerHTML = '‚ö†Ô∏è UNAUTHENTICATED';
        indicator.style.background = 'linear-gradient(135deg, #dc2626, #b91c1c)';
      }
    }

    // Admin Functions
    function editContent(type) {
      if (!checkSession()) return;
      logSecurityEvent(`CONTENT_EDIT_ATTEMPT: ${type}`, 'Info');
      alert(`Opening ${type} editor...`);
    }

    function manageImages() {
      if (!checkSession()) return;
      logSecurityEvent('IMAGE_MANAGEMENT_ACCESSED', 'Info');
      window.open('admin-live.html', '_blank');
    }

    function manageTestimonials() {
      if (!checkSession()) return;
      logSecurityEvent('TESTIMONIALS_MANAGEMENT_ACCESSED', 'Info');
      alert('Opening testimonials management...');
    }

    function manageProjects() {
      if (!checkSession()) return;
      logSecurityEvent('PROJECTS_MANAGEMENT_ACCESSED', 'Info');
      alert('Opening projects management...');
    }

    function viewAnalytics() {
      if (!checkSession()) return;
      logSecurityEvent('ANALYTICS_ACCESSED', 'Info');
      alert('Opening analytics dashboard...');
    }

    function changePassword() {
      if (!checkSession()) return;
      logSecurityEvent('PASSWORD_CHANGE_REQUESTED', 'Info');
      alert('Password change functionality would be implemented here.');
    }

    function viewAccessLogs() {
      if (!checkSession()) return;
      logSecurityEvent('ACCESS_LOGS_VIEWED', 'Info');
      const logs = JSON.parse(localStorage.getItem('securityLogs') || '[]');
      console.log('Security Logs:', logs);
      alert('Access logs displayed in console.');
    }

    function manageUsers() {
      if (!checkSession()) return;
      logSecurityEvent('USER_MANAGEMENT_ACCESSED', 'Info');
      alert('User management functionality would be implemented here.');
    }

    function backupData() {
      if (!checkSession()) return;
      logSecurityEvent('DATA_BACKUP_INITIATED', 'Info');
      alert('Data backup initiated...');
    }

    function scanSecurity() {
      if (!checkSession()) return;
      logSecurityEvent('SECURITY_SCAN_INITIATED', 'Info');
      alert('Security scan initiated...');
    }

    function logout() {
      logSecurityEvent('USER_LOGOUT', 'Info');
      securityState.isAuthenticated = false;
      securityState.sessionStart = null;
      document.getElementById('adminDashboard').classList.add('hidden');
      document.getElementById('loginScreen').classList.remove('hidden');
      document.getElementById('loginForm').reset();
      updateSecurityIndicator();
    }

    // Session Monitoring
    setInterval(() => {
      if (securityState.isAuthenticated && !checkSession()) {
        alert('Session expired. Please log in again.');
        logout();
      }
    }, 60000); // Check every minute

    // Initialize Security System
    document.addEventListener('DOMContentLoaded', function() {
      logSecurityEvent('SECURITY_SYSTEM_INITIALIZED', 'Info');
      updateSecurityIndicator();
      
      // Load previous security logs
      const logs = JSON.parse(localStorage.getItem('securityLogs') || '[]');
      const activityLog = document.getElementById('activityLog');
      if (activityLog && logs.length > 0) {
        const recentLogs = logs.slice(-10); // Show last 10 entries
        recentLogs.forEach(log => {
          activityLog.innerHTML += `[${log.timestamp}] [${log.level}] ${log.event}<br>`;
        });
      }
    });

    // Prevent right-click and F12 (basic protection)
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      logSecurityEvent('RIGHT_CLICK_ATTEMPT', 'Warning');
    });

    document.addEventListener('keydown', function(e) {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
        e.preventDefault();
        logSecurityEvent('DEV_TOOLS_ATTEMPT', 'Warning');
      }
    });
  </script>
</body>
</html>
